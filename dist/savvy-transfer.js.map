{"version":3,"file":"savvy-transfer.js","sources":["../node_modules/@babel/runtime/node_modules/regenerator-runtime/runtime.js","../node_modules/@babel/runtime/node_modules/regenerator-runtime/runtime-module.js","../node_modules/@babel/runtime/regenerator/index.js","../node_modules/@babel/runtime/helpers/asyncToGenerator.js","../node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","../node_modules/@babel/runtime/helpers/iterableToArray.js","../node_modules/@babel/runtime/helpers/nonIterableSpread.js","../node_modules/@babel/runtime/helpers/toConsumableArray.js","../node_modules/@babel/runtime/helpers/classCallCheck.js","../node_modules/@babel/runtime/helpers/createClass.js","../node_modules/@babel/runtime/helpers/typeof.js","../node_modules/@babel/runtime/helpers/assertThisInitialized.js","../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","../node_modules/@babel/runtime/helpers/getPrototypeOf.js","../node_modules/@babel/runtime/helpers/setPrototypeOf.js","../node_modules/@babel/runtime/helpers/inherits.js","../src/methods/IO.ts","../src/utils/index.ts","../src/utils/crc32.ts","../src/utils/Int64.ts","../src/methods/zip.ts","../src/methods/filesystem.ts","../src/methods/memory.ts","../src/file.ts","../src/transfer.ts","../src/processer.ts","../src/index.ts"],"sourcesContent":["/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n!(function(global) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  var inModule = typeof module === \"object\";\n  var runtime = global.regeneratorRuntime;\n  if (runtime) {\n    if (inModule) {\n      // If regeneratorRuntime is defined globally and we're in a module,\n      // make the exports object identical to regeneratorRuntime.\n      module.exports = runtime;\n    }\n    // Don't bother evaluating the rest of this file if the runtime was\n    // already defined globally.\n    return;\n  }\n\n  // Define the runtime globally (as expected by generated code) as either\n  // module.exports (if we're in a module) or a new, empty object.\n  runtime = global.regeneratorRuntime = inModule ? module.exports : {};\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  runtime.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  runtime.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  runtime.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  runtime.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  runtime.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  runtime.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return runtime.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        if (delegate.iterator.return) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  runtime.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  runtime.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n})(\n  // In sloppy mode, unbound `this` refers to the global object, fallback to\n  // Function constructor if we're in global strict mode. That is sadly a form\n  // of indirect eval which violates Content Security Policy.\n  (function() {\n    return this || (typeof self === \"object\" && self);\n  })() || Function(\"return this\")()\n);\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n// This method of obtaining a reference to the global object needs to be\n// kept identical to the way it is obtained in runtime.js\nvar g = (function() {\n  return this || (typeof self === \"object\" && self);\n})() || Function(\"return this\")();\n\n// Use `getOwnPropertyNames` because not all browsers support calling\n// `hasOwnProperty` on the global `self` object in a worker. See #183.\nvar hadRuntime = g.regeneratorRuntime &&\n  Object.getOwnPropertyNames(g).indexOf(\"regeneratorRuntime\") >= 0;\n\n// Save the old regeneratorRuntime in case it needs to be restored later.\nvar oldRuntime = hadRuntime && g.regeneratorRuntime;\n\n// Force reevalutation of runtime.js.\ng.regeneratorRuntime = undefined;\n\nmodule.exports = require(\"./runtime\");\n\nif (hadRuntime) {\n  // Restore the original runtime.\n  g.regeneratorRuntime = oldRuntime;\n} else {\n  // Remove the global property added by runtime.js.\n  try {\n    delete g.regeneratorRuntime;\n  } catch(e) {\n    g.regeneratorRuntime = undefined;\n  }\n}\n","module.exports = require(\"regenerator-runtime\");\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator;","function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nmodule.exports = _arrayWithoutHoles;","function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nmodule.exports = _nonIterableSpread;","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","export default class SavvyIO {}\r\n","const extmime: {\r\n  [key: string]: string;\r\n} = {\r\n  '3ds': 'image/x-3ds',\r\n  '3g2': 'video/3gpp2',\r\n  '3gp': 'video/3gpp',\r\n  '7z': 'application/x-7z-compressed',\r\n  aac: 'audio/x-aac',\r\n  abw: 'application/x-abiword',\r\n  ace: 'application/x-ace-compressed',\r\n  adp: 'audio/adpcm',\r\n  aif: 'audio/x-aiff',\r\n  aifc: 'audio/x-aiff',\r\n  aiff: 'audio/x-aiff',\r\n  apk: 'application/vnd.android.package-archive',\r\n  asf: 'video/x-ms-asf',\r\n  asx: 'video/x-ms-asf',\r\n  atom: 'application/atom+xml',\r\n  au: 'audio/basic',\r\n  avi: 'video/x-msvideo',\r\n  bat: 'application/x-msdownload',\r\n  bmp: 'image/bmp',\r\n  btif: 'image/prs.btif',\r\n  bz: 'application/x-bzip',\r\n  bz2: 'application/x-bzip2',\r\n  caf: 'audio/x-caf',\r\n  cgm: 'image/cgm',\r\n  cmx: 'image/x-cmx',\r\n  com: 'application/x-msdownload',\r\n  conf: 'text/plain',\r\n  css: 'text/css',\r\n  csv: 'text/csv',\r\n  dbk: 'application/docbook+xml',\r\n  deb: 'application/x-debian-package',\r\n  def: 'text/plain',\r\n  djv: 'image/vnd.djvu',\r\n  djvu: 'image/vnd.djvu',\r\n  dll: 'application/x-msdownload',\r\n  dmg: 'application/x-apple-diskimage',\r\n  doc: 'application/msword',\r\n  docm: 'application/vnd.ms-word.document.macroenabled.12',\r\n  docx: 'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\r\n  dot: 'application/msword',\r\n  dotm: 'application/vnd.ms-word.template.macroenabled.12',\r\n  dotx: 'application/vnd.openxmlformats-officedocument.wordprocessingml.template',\r\n  dra: 'audio/vnd.dra',\r\n  dtd: 'application/xml-dtd',\r\n  dts: 'audio/vnd.dts',\r\n  dtshd: 'audio/vnd.dts.hd',\r\n  dvb: 'video/vnd.dvb.file',\r\n  dwg: 'image/vnd.dwg',\r\n  dxf: 'image/vnd.dxf',\r\n  ecelp4800: 'audio/vnd.nuera.ecelp4800',\r\n  ecelp7470: 'audio/vnd.nuera.ecelp7470',\r\n  ecelp9600: 'audio/vnd.nuera.ecelp9600',\r\n  emf: 'application/x-msmetafile',\r\n  emz: 'application/x-msmetafile',\r\n  eol: 'audio/vnd.digital-winds',\r\n  epub: 'application/epub+zip',\r\n  exe: 'application/x-msdownload',\r\n  f4v: 'video/x-f4v',\r\n  fbs: 'image/vnd.fastbidsheet',\r\n  fh: 'image/x-freehand',\r\n  fh4: 'image/x-freehand',\r\n  fh5: 'image/x-freehand',\r\n  fh7: 'image/x-freehand',\r\n  fhc: 'image/x-freehand',\r\n  flac: 'audio/x-flac',\r\n  fli: 'video/x-fli',\r\n  flv: 'video/x-flv',\r\n  fpx: 'image/vnd.fpx',\r\n  fst: 'image/vnd.fst',\r\n  fvt: 'video/vnd.fvt',\r\n  g3: 'image/g3fax',\r\n  gif: 'image/gif',\r\n  h261: 'video/h261',\r\n  h263: 'video/h263',\r\n  h264: 'video/h264',\r\n  heif: 'image/heif',\r\n  heic: 'image/heic',\r\n  htm: 'text/html',\r\n  html: 'text/html',\r\n  ico: 'image/x-icon',\r\n  ief: 'image/ief',\r\n  iso: 'application/x-iso9660-image',\r\n  jpe: 'image/jpeg',\r\n  jpeg: 'image/jpeg',\r\n  jpg: 'image/jpeg',\r\n  jpgm: 'video/jpm',\r\n  jpgv: 'video/jpeg',\r\n  jpm: 'video/jpm',\r\n  json: 'application/json',\r\n  jsonml: 'application/jsonml+json',\r\n  kar: 'audio/midi',\r\n  ktx: 'image/ktx',\r\n  list: 'text/plain',\r\n  log: 'text/plain',\r\n  lvp: 'audio/vnd.lucent.voice',\r\n  m13: 'application/x-msmediaview',\r\n  m14: 'application/x-msmediaview',\r\n  m1v: 'video/mpeg',\r\n  m21: 'application/mp21',\r\n  m2a: 'audio/mpeg',\r\n  m2v: 'video/mpeg',\r\n  m3a: 'audio/mpeg',\r\n  m3u: 'audio/x-mpegurl',\r\n  m3u8: 'application/vnd.apple.mpegurl',\r\n  m4a: 'audio/mp4',\r\n  m4u: 'video/vnd.mpegurl',\r\n  m4v: 'video/x-m4v',\r\n  mdi: 'image/vnd.ms-modi',\r\n  mid: 'audio/midi',\r\n  midi: 'audio/midi',\r\n  mj2: 'video/mj2',\r\n  mjp2: 'video/mj2',\r\n  mk3d: 'video/x-matroska',\r\n  mka: 'audio/x-matroska',\r\n  mks: 'video/x-matroska',\r\n  mkv: 'video/x-matroska',\r\n  mmr: 'image/vnd.fujixerox.edmics-mmr',\r\n  mng: 'video/x-mng',\r\n  mov: 'video/quicktime',\r\n  movie: 'video/x-sgi-movie',\r\n  mp2: 'audio/mpeg',\r\n  mp21: 'application/mp21',\r\n  mp2a: 'audio/mpeg',\r\n  mp3: 'audio/mpeg',\r\n  mp4: 'video/mp4',\r\n  mp4a: 'audio/mp4',\r\n  mp4s: 'application/mp4',\r\n  mp4v: 'video/mp4',\r\n  mpe: 'video/mpeg',\r\n  mpeg: 'video/mpeg',\r\n  mpg: 'video/mpeg',\r\n  mpg4: 'video/mp4',\r\n  mpga: 'audio/mpeg',\r\n  mpkg: 'application/vnd.apple.installer+xml',\r\n  msi: 'application/x-msdownload',\r\n  mvb: 'application/x-msmediaview',\r\n  mxf: 'application/mxf',\r\n  mxml: 'application/xv+xml',\r\n  mxu: 'video/vnd.mpegurl',\r\n  npx: 'image/vnd.net-fpx',\r\n  odb: 'application/vnd.oasis.opendocument.database',\r\n  odc: 'application/vnd.oasis.opendocument.chart',\r\n  odf: 'application/vnd.oasis.opendocument.formula',\r\n  odft: 'application/vnd.oasis.opendocument.formula-template',\r\n  odg: 'application/vnd.oasis.opendocument.graphics',\r\n  odi: 'application/vnd.oasis.opendocument.image',\r\n  odm: 'application/vnd.oasis.opendocument.text-master',\r\n  odp: 'application/vnd.oasis.opendocument.presentation',\r\n  ods: 'application/vnd.oasis.opendocument.spreadsheet',\r\n  odt: 'application/vnd.oasis.opendocument.text',\r\n  oga: 'audio/ogg',\r\n  ogg: 'audio/ogg',\r\n  ogv: 'video/ogg',\r\n  ogx: 'application/ogg',\r\n  otc: 'application/vnd.oasis.opendocument.chart-template',\r\n  otg: 'application/vnd.oasis.opendocument.graphics-template',\r\n  oth: 'application/vnd.oasis.opendocument.text-web',\r\n  oti: 'application/vnd.oasis.opendocument.image-template',\r\n  otp: 'application/vnd.oasis.opendocument.presentation-template',\r\n  ots: 'application/vnd.oasis.opendocument.spreadsheet-template',\r\n  ott: 'application/vnd.oasis.opendocument.text-template',\r\n  oxt: 'application/vnd.openofficeorg.extension',\r\n  pbm: 'image/x-portable-bitmap',\r\n  pct: 'image/x-pict',\r\n  pcx: 'image/x-pcx',\r\n  pdf: 'application/pdf',\r\n  pgm: 'image/x-portable-graymap',\r\n  pic: 'image/x-pict',\r\n  plb: 'application/vnd.3gpp.pic-bw-large',\r\n  png: 'image/png',\r\n  pnm: 'image/x-portable-anymap',\r\n  pot: 'application/vnd.ms-powerpoint',\r\n  potx: 'application/vnd.openxmlformats-officedocument.presentationml.template',\r\n  ppm: 'image/x-portable-pixmap',\r\n  pps: 'application/vnd.ms-powerpoint',\r\n  ppsx: 'application/vnd.openxmlformats-officedocument.presentationml.slideshow',\r\n  ppt: 'application/vnd.ms-powerpoint',\r\n  pptx: 'application/vnd.openxmlformats-officedocument.presentationml.presentation',\r\n  psb: 'application/vnd.3gpp.pic-bw-small',\r\n  psd: 'image/vnd.adobe.photoshop',\r\n  pvb: 'application/vnd.3gpp.pic-bw-var',\r\n  pya: 'audio/vnd.ms-playready.media.pya',\r\n  pyv: 'video/vnd.ms-playready.media.pyv',\r\n  qt: 'video/quicktime',\r\n  ra: 'audio/x-pn-realaudio',\r\n  ram: 'audio/x-pn-realaudio',\r\n  ras: 'image/x-cmu-raster',\r\n  rgb: 'image/x-rgb',\r\n  rip: 'audio/vnd.rip',\r\n  rlc: 'image/vnd.fujixerox.edmics-rlc',\r\n  rmi: 'audio/midi',\r\n  rmp: 'audio/x-pn-realaudio-plugin',\r\n  s3m: 'audio/s3m',\r\n  sgi: 'image/sgi',\r\n  sgm: 'text/sgml',\r\n  sgml: 'text/sgml',\r\n  sid: 'image/x-mrsid-image',\r\n  sil: 'audio/silk',\r\n  sldx: 'application/vnd.openxmlformats-officedocument.presentationml.slide',\r\n  smv: 'video/x-smv',\r\n  snd: 'audio/basic',\r\n  spx: 'audio/ogg',\r\n  srt: 'application/x-subrip',\r\n  sub: 'text/vnd.dvb.subtitle',\r\n  svg: 'image/svg+xml',\r\n  svgz: 'image/svg+xml',\r\n  swf: 'application/x-shockwave-flash',\r\n  tcap: 'application/vnd.3gpp2.tcap',\r\n  text: 'text/plain',\r\n  tga: 'image/x-tga',\r\n  tif: 'image/tiff',\r\n  tiff: 'image/tiff',\r\n  torrent: 'application/x-bittorrent',\r\n  tsv: 'text/tab-separated-values',\r\n  ttl: 'text/turtle',\r\n  txt: 'text/plain',\r\n  udeb: 'application/x-debian-package',\r\n  uva: 'audio/vnd.dece.audio',\r\n  uvg: 'image/vnd.dece.graphic',\r\n  uvh: 'video/vnd.dece.hd',\r\n  uvi: 'image/vnd.dece.graphic',\r\n  uvm: 'video/vnd.dece.mobile',\r\n  uvp: 'video/vnd.dece.pd',\r\n  uvs: 'video/vnd.dece.sd',\r\n  uvu: 'video/vnd.uvvu.mp4',\r\n  uvv: 'video/vnd.dece.video',\r\n  uvva: 'audio/vnd.dece.audio',\r\n  uvvg: 'image/vnd.dece.graphic',\r\n  uvvh: 'video/vnd.dece.hd',\r\n  uvvi: 'image/vnd.dece.graphic',\r\n  uvvm: 'video/vnd.dece.mobile',\r\n  uvvp: 'video/vnd.dece.pd',\r\n  uvvs: 'video/vnd.dece.sd',\r\n  uvvu: 'video/vnd.uvvu.mp4',\r\n  uvvv: 'video/vnd.dece.video',\r\n  viv: 'video/vnd.vivo',\r\n  vob: 'video/x-ms-vob',\r\n  wav: 'audio/x-wav',\r\n  wax: 'audio/x-ms-wax',\r\n  wbmp: 'image/vnd.wap.wbmp',\r\n  wdp: 'image/vnd.ms-photo',\r\n  weba: 'audio/webm',\r\n  webm: 'video/webm',\r\n  webp: 'image/webp',\r\n  wm: 'video/x-ms-wm',\r\n  wma: 'audio/x-ms-wma',\r\n  wmf: 'application/x-msmetafile',\r\n  wmv: 'video/x-ms-wmv',\r\n  wmx: 'video/x-ms-wmx',\r\n  wvx: 'video/x-ms-wvx',\r\n  xap: 'application/x-silverlight-app',\r\n  xbm: 'image/x-xbitmap',\r\n  xht: 'application/xhtml+xml',\r\n  xhtml: 'application/xhtml+xml',\r\n  xhvml: 'application/xv+xml',\r\n  xif: 'image/vnd.xiff',\r\n  xlsx: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\r\n  xltx: 'application/vnd.openxmlformats-officedocument.spreadsheetml.template',\r\n  xm: 'audio/xm',\r\n  xml: 'application/xml',\r\n  xop: 'application/xop+xml',\r\n  xpl: 'application/xproc+xml',\r\n  xpm: 'image/x-xpixmap',\r\n  xsl: 'application/xml',\r\n  xslt: 'application/xslt+xml',\r\n  xspf: 'application/xspf+xml',\r\n  xvm: 'application/xv+xml',\r\n  xvml: 'application/xv+xml',\r\n  xwd: 'image/x-xwindowdump',\r\n  zip: 'application/zip'\r\n};\r\nconst ext: {\r\n  [key: string]: string;\r\n} = {};\r\nexport function filemime(name: string) {\r\n  var fext = fileext(name);\r\n  return extmime[fext] || 'application/octet-stream';\r\n}\r\n\r\nexport function filetype(name: string): string {\r\n  var fext = fileext(name);\r\n  if (ext[fext]) {\r\n    return ext[fext][1];\r\n  } else if (fext && fext.length > 1) {\r\n    return '%1 File'.replace('%1', fext.toUpperCase());\r\n  } else {\r\n    return 'File';\r\n  }\r\n}\r\nexport function fileext(name: string, uppercase: boolean = false, iknowwhatimdoing: boolean = false) {\r\n  name = String(name || '');\r\n  if (!name) {\r\n    name = 'unknown';\r\n  }\r\n\r\n  var ext = name.substr(name.lastIndexOf('.') + 1);\r\n  if (ext === name) {\r\n    ext = '';\r\n  } else if (!iknowwhatimdoing) {\r\n    ext = ext.replace(/<[^>]*>/g, '').replace(/[^\\w+]/g, '');\r\n\r\n    if (ext.length > 9) {\r\n      ext = ext.substr(0, 9);\r\n    }\r\n  }\r\n\r\n  return uppercase ? ext.toUpperCase() : ext.toLowerCase();\r\n}\r\n\r\nexport function dec2hex(dec: number) {\r\n  return ('0' + dec.toString(16)).substr(-2);\r\n}\r\n\r\nexport function generateId(len: number) {\r\n  var arr = new Uint8Array((len || 40) / 2);\r\n  window.crypto.getRandomValues(arr);\r\n  return Array.from(arr, dec2hex).join('');\r\n}\r\n","var crc32table = [\r\n  0x00000000,\r\n  0x77073096,\r\n  0xee0e612c,\r\n  0x990951ba,\r\n  0x076dc419,\r\n  0x706af48f,\r\n  0xe963a535,\r\n  0x9e6495a3,\r\n  0x0edb8832,\r\n  0x79dcb8a4,\r\n  0xe0d5e91e,\r\n  0x97d2d988,\r\n  0x09b64c2b,\r\n  0x7eb17cbd,\r\n  0xe7b82d07,\r\n  0x90bf1d91,\r\n  0x1db71064,\r\n  0x6ab020f2,\r\n  0xf3b97148,\r\n  0x84be41de,\r\n  0x1adad47d,\r\n  0x6ddde4eb,\r\n  0xf4d4b551,\r\n  0x83d385c7,\r\n  0x136c9856,\r\n  0x646ba8c0,\r\n  0xfd62f97a,\r\n  0x8a65c9ec,\r\n  0x14015c4f,\r\n  0x63066cd9,\r\n  0xfa0f3d63,\r\n  0x8d080df5,\r\n  0x3b6e20c8,\r\n  0x4c69105e,\r\n  0xd56041e4,\r\n  0xa2677172,\r\n  0x3c03e4d1,\r\n  0x4b04d447,\r\n  0xd20d85fd,\r\n  0xa50ab56b,\r\n  0x35b5a8fa,\r\n  0x42b2986c,\r\n  0xdbbbc9d6,\r\n  0xacbcf940,\r\n  0x32d86ce3,\r\n  0x45df5c75,\r\n  0xdcd60dcf,\r\n  0xabd13d59,\r\n  0x26d930ac,\r\n  0x51de003a,\r\n  0xc8d75180,\r\n  0xbfd06116,\r\n  0x21b4f4b5,\r\n  0x56b3c423,\r\n  0xcfba9599,\r\n  0xb8bda50f,\r\n  0x2802b89e,\r\n  0x5f058808,\r\n  0xc60cd9b2,\r\n  0xb10be924,\r\n  0x2f6f7c87,\r\n  0x58684c11,\r\n  0xc1611dab,\r\n  0xb6662d3d,\r\n  0x76dc4190,\r\n  0x01db7106,\r\n  0x98d220bc,\r\n  0xefd5102a,\r\n  0x71b18589,\r\n  0x06b6b51f,\r\n  0x9fbfe4a5,\r\n  0xe8b8d433,\r\n  0x7807c9a2,\r\n  0x0f00f934,\r\n  0x9609a88e,\r\n  0xe10e9818,\r\n  0x7f6a0dbb,\r\n  0x086d3d2d,\r\n  0x91646c97,\r\n  0xe6635c01,\r\n  0x6b6b51f4,\r\n  0x1c6c6162,\r\n  0x856530d8,\r\n  0xf262004e,\r\n  0x6c0695ed,\r\n  0x1b01a57b,\r\n  0x8208f4c1,\r\n  0xf50fc457,\r\n  0x65b0d9c6,\r\n  0x12b7e950,\r\n  0x8bbeb8ea,\r\n  0xfcb9887c,\r\n  0x62dd1ddf,\r\n  0x15da2d49,\r\n  0x8cd37cf3,\r\n  0xfbd44c65,\r\n  0x4db26158,\r\n  0x3ab551ce,\r\n  0xa3bc0074,\r\n  0xd4bb30e2,\r\n  0x4adfa541,\r\n  0x3dd895d7,\r\n  0xa4d1c46d,\r\n  0xd3d6f4fb,\r\n  0x4369e96a,\r\n  0x346ed9fc,\r\n  0xad678846,\r\n  0xda60b8d0,\r\n  0x44042d73,\r\n  0x33031de5,\r\n  0xaa0a4c5f,\r\n  0xdd0d7cc9,\r\n  0x5005713c,\r\n  0x270241aa,\r\n  0xbe0b1010,\r\n  0xc90c2086,\r\n  0x5768b525,\r\n  0x206f85b3,\r\n  0xb966d409,\r\n  0xce61e49f,\r\n  0x5edef90e,\r\n  0x29d9c998,\r\n  0xb0d09822,\r\n  0xc7d7a8b4,\r\n  0x59b33d17,\r\n  0x2eb40d81,\r\n  0xb7bd5c3b,\r\n  0xc0ba6cad,\r\n  0xedb88320,\r\n  0x9abfb3b6,\r\n  0x03b6e20c,\r\n  0x74b1d29a,\r\n  0xead54739,\r\n  0x9dd277af,\r\n  0x04db2615,\r\n  0x73dc1683,\r\n  0xe3630b12,\r\n  0x94643b84,\r\n  0x0d6d6a3e,\r\n  0x7a6a5aa8,\r\n  0xe40ecf0b,\r\n  0x9309ff9d,\r\n  0x0a00ae27,\r\n  0x7d079eb1,\r\n  0xf00f9344,\r\n  0x8708a3d2,\r\n  0x1e01f268,\r\n  0x6906c2fe,\r\n  0xf762575d,\r\n  0x806567cb,\r\n  0x196c3671,\r\n  0x6e6b06e7,\r\n  0xfed41b76,\r\n  0x89d32be0,\r\n  0x10da7a5a,\r\n  0x67dd4acc,\r\n  0xf9b9df6f,\r\n  0x8ebeeff9,\r\n  0x17b7be43,\r\n  0x60b08ed5,\r\n  0xd6d6a3e8,\r\n  0xa1d1937e,\r\n  0x38d8c2c4,\r\n  0x4fdff252,\r\n  0xd1bb67f1,\r\n  0xa6bc5767,\r\n  0x3fb506dd,\r\n  0x48b2364b,\r\n  0xd80d2bda,\r\n  0xaf0a1b4c,\r\n  0x36034af6,\r\n  0x41047a60,\r\n  0xdf60efc3,\r\n  0xa867df55,\r\n  0x316e8eef,\r\n  0x4669be79,\r\n  0xcb61b38c,\r\n  0xbc66831a,\r\n  0x256fd2a0,\r\n  0x5268e236,\r\n  0xcc0c7795,\r\n  0xbb0b4703,\r\n  0x220216b9,\r\n  0x5505262f,\r\n  0xc5ba3bbe,\r\n  0xb2bd0b28,\r\n  0x2bb45a92,\r\n  0x5cb36a04,\r\n  0xc2d7ffa7,\r\n  0xb5d0cf31,\r\n  0x2cd99e8b,\r\n  0x5bdeae1d,\r\n  0x9b64c2b0,\r\n  0xec63f226,\r\n  0x756aa39c,\r\n  0x026d930a,\r\n  0x9c0906a9,\r\n  0xeb0e363f,\r\n  0x72076785,\r\n  0x05005713,\r\n  0x95bf4a82,\r\n  0xe2b87a14,\r\n  0x7bb12bae,\r\n  0x0cb61b38,\r\n  0x92d28e9b,\r\n  0xe5d5be0d,\r\n  0x7cdcefb7,\r\n  0x0bdbdf21,\r\n  0x86d3d2d4,\r\n  0xf1d4e242,\r\n  0x68ddb3f8,\r\n  0x1fda836e,\r\n  0x81be16cd,\r\n  0xf6b9265b,\r\n  0x6fb077e1,\r\n  0x18b74777,\r\n  0x88085ae6,\r\n  0xff0f6a70,\r\n  0x66063bca,\r\n  0x11010b5c,\r\n  0x8f659eff,\r\n  0xf862ae69,\r\n  0x616bffd3,\r\n  0x166ccf45,\r\n  0xa00ae278,\r\n  0xd70dd2ee,\r\n  0x4e048354,\r\n  0x3903b3c2,\r\n  0xa7672661,\r\n  0xd06016f7,\r\n  0x4969474d,\r\n  0x3e6e77db,\r\n  0xaed16a4a,\r\n  0xd9d65adc,\r\n  0x40df0b66,\r\n  0x37d83bf0,\r\n  0xa9bcae53,\r\n  0xdebb9ec5,\r\n  0x47b2cf7f,\r\n  0x30b5ffe9,\r\n  0xbdbdf21c,\r\n  0xcabac28a,\r\n  0x53b39330,\r\n  0x24b4a3a6,\r\n  0xbad03605,\r\n  0xcdd70693,\r\n  0x54de5729,\r\n  0x23d967bf,\r\n  0xb3667a2e,\r\n  0xc4614ab8,\r\n  0x5d681b02,\r\n  0x2a6f2b94,\r\n  0xb40bbe37,\r\n  0xc30c8ea1,\r\n  0x5a05df1b,\r\n  0x2d02ef8d\r\n];\r\n\r\nexport default function crc32(data: any, crc?: any, len?: any) {\r\n  if (typeof crc === 'undefined') {\r\n    crc = 0;\r\n  }\r\n  if (typeof len === 'undefined') {\r\n    len = data.length;\r\n  }\r\n\r\n  var x = 0;\r\n  var y = 0;\r\n\r\n  var off = data.length - len;\r\n\r\n  crc = crc ^ -1;\r\n\r\n  for (var i = 0; i < len; i++) {\r\n    y = (crc ^ data[i + off]) & 0xff;\r\n    x = crc32table[y];\r\n    crc = (crc >>> 8) ^ x;\r\n  }\r\n\r\n  return crc ^ -1;\r\n}\r\n","//     Int64.js\r\n//\r\n//     Copyright (c) 2012 Robert Kieffer\r\n//     MIT License - http://opensource.org/licenses/mit-license.php\r\n\r\n/**\r\n * Support for handling 64-bit int numbers in Javascript (node.js)\r\n *\r\n * JS Numbers are IEEE-754 binary double-precision floats, which limits the\r\n * range of values that can be represented with integer precision to:\r\n *\r\n * 2^^53 <= N <= 2^53\r\n *\r\n * Int64 objects wrap a node Buffer that holds the 8-bytes of int64 data.  These\r\n * objects operate directly on the buffer which means that if they are created\r\n * using an existing buffer then setting the value will modify the Buffer, and\r\n * vice-versa.\r\n *\r\n * Internal Representation\r\n *\r\n * The internal buffer format is Big Endian.  I.e. the most-significant byte is\r\n * at buffer[0], the least-significant at buffer[7].  For the purposes of\r\n * converting to/from JS native numbers, the value is assumed to be a signed\r\n * integer stored in 2's complement form.\r\n *\r\n * For details about IEEE-754 see:\r\n * http://en.wikipedia.org/wiki/Double_precision_floating-point_format\r\n */\r\n\r\n// Useful masks and values for bit twiddling\r\nvar MASK31 = 0x7fffffff,\r\n  VAL31 = 0x80000000;\r\nvar MASK32 = 0xffffffff,\r\n  VAL32 = 0x100000000;\r\n\r\n// Map for converting hex octets to strings\r\nvar _HEX: any = [];\r\nfor (var i = 0; i < 256; i++) {\r\n  _HEX[i] = (i > 0xf ? '' : '0') + i.toString(16);\r\n}\r\n\r\nvar hasBuffer = typeof Buffer !== 'undefined';\r\n\r\n//\r\n// Int64\r\n//\r\n\r\n/**\r\n * Constructor accepts any of the following argument types:\r\n *\r\n * new Int64(buffer[, offset=0]) - Existing Buffer with byte offset\r\n * new Int64(Uint8Array[, offset=0]) - Existing Uint8Array with a byte offset\r\n * new Int64(string)             - Hex string (throws if n is outside int64 range)\r\n * new Int64(number)             - Number (throws if n is outside int64 range)\r\n * new Int64(hi, lo)             - Raw bits as two 32-bit values\r\n */\r\nclass Int64 {\r\n  // Max integer value that JS can accurately represent\r\n  static MAX_INT: number = Math.pow(2, 53);\r\n  // Min integer value that JS can accurately represent\r\n  static MIN_INT: number = -Math.pow(2, 53);\r\n\r\n  public buffer: any;\r\n  public offset: any;\r\n\r\n  constructor(a1: any, a2: any) {\r\n    var asIs = hasBuffer ? a1 instanceof Buffer : a1 instanceof Uint8Array;\r\n    if (asIs) {\r\n      this.buffer = a1;\r\n      this.offset = a2 || 0;\r\n    } else if (Object.prototype.toString.call(a1) == '[object Uint8Array]') {\r\n      // Under Browserify, Buffers can extend Uint8Arrays rather than an\r\n      // instance of Buffer. We could assume the passed in Uint8Array is actually\r\n      // a buffer but that won't handle the case where a raw Uint8Array is passed\r\n      // in. We construct a new Buffer just in case.\r\n      this.buffer = new Buffer(a1);\r\n      this.offset = a2 || 0;\r\n    } else {\r\n      this.buffer = this.buffer || (hasBuffer ? new Buffer(8) : new Uint8Array(8));\r\n      this.offset = 0;\r\n      this.setValue(a1, a2);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Do in-place 2's compliment.  See\r\n   * http://en.wikipedia.org/wiki/Two's_complement\r\n   */\r\n  _2scomp = () => {\r\n    var b = this.buffer,\r\n      o = this.offset,\r\n      carry = 1;\r\n    for (var i = o + 7; i >= o; i--) {\r\n      var v = (b[i] ^ 0xff) + carry;\r\n      b[i] = v & 0xff;\r\n      carry = v >> 8;\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Set the value. Takes any of the following arguments:\r\n   *\r\n   * setValue(string) - A hexidecimal string\r\n   * setValue(number) - Number (throws if n is outside int64 range)\r\n   * setValue(hi, lo) - Raw bits as two 32-bit values\r\n   */\r\n  setValue = (hi: any, lo: any) => {\r\n    var negate = false;\r\n    if (!lo) {\r\n      if (typeof hi == 'number') {\r\n        // Simplify bitfield retrieval by using abs() value.  We restore sign\r\n        // later\r\n        negate = hi < 0;\r\n        hi = Math.abs(hi);\r\n        lo = hi % VAL32;\r\n        hi = hi / VAL32;\r\n        if (hi > VAL32) throw new RangeError(hi + ' is outside Int64 range');\r\n        hi = hi | 0;\r\n      } else if (typeof hi == 'string') {\r\n        hi = (hi + '').replace(/^0x/, '');\r\n        lo = hi.substr(-8);\r\n        hi = hi.length > 8 ? hi.substr(0, hi.length - 8) : '';\r\n        hi = parseInt(hi, 16);\r\n        lo = parseInt(lo, 16);\r\n      } else {\r\n        throw new Error(hi + ' must be a Number or String');\r\n      }\r\n    }\r\n\r\n    // Technically we should throw if hi or lo is outside int32 range here, but\r\n    // it's not worth the effort. Anything past the 32'nd bit is ignored.\r\n\r\n    // Copy bytes to buffer\r\n    var b = this.buffer,\r\n      o = this.offset;\r\n    for (var i = 7; i >= 0; i--) {\r\n      b[o + i] = lo & 0xff;\r\n      lo = i == 4 ? hi : lo >>> 8;\r\n    }\r\n\r\n    // Restore sign of passed argument\r\n    if (negate) this._2scomp();\r\n  };\r\n\r\n  /**\r\n   * Convert to a native JS number.\r\n   *\r\n   * WARNING: Do not expect this value to be accurate to integer precision for\r\n   * large (positive or negative) numbers!\r\n   *\r\n   * @param allowImprecise If true, no check is performed to verify the\r\n   * returned value is accurate to integer precision.  If false, imprecise\r\n   * numbers (very large positive or negative numbers) will be forced to +/-\r\n   * Infinity.\r\n   */\r\n  toNumber = (allowImprecise: any) => {\r\n    var b = this.buffer,\r\n      o = this.offset;\r\n\r\n    // Running sum of octets, doing a 2's complement\r\n    var negate = b[o] & 0x80,\r\n      x = 0,\r\n      carry = 1;\r\n    for (var i = 7, m = 1; i >= 0; i--, m *= 256) {\r\n      var v = b[o + i];\r\n\r\n      // 2's complement for negative numbers\r\n      if (negate) {\r\n        v = (v ^ 0xff) + carry;\r\n        carry = v >> 8;\r\n        v = v & 0xff;\r\n      }\r\n\r\n      x += v * m;\r\n    }\r\n\r\n    // Return Infinity if we've lost integer precision\r\n    if (!allowImprecise && x >= Int64.MAX_INT) {\r\n      return negate ? -Infinity : Infinity;\r\n    }\r\n\r\n    return negate ? -x : x;\r\n  };\r\n\r\n  /**\r\n   * Convert to a JS Number. Returns +/-Infinity for values that can't be\r\n   * represented to integer precision.\r\n   */\r\n  valueOf = () => {\r\n    return this.toNumber(false);\r\n  };\r\n\r\n  /**\r\n   * Return string value\r\n   *\r\n   * @param radix Just like Number#toString()'s radix\r\n   */\r\n  toString = (radix: number) => {\r\n    return this.valueOf().toString(radix || 10);\r\n  };\r\n\r\n  /**\r\n   * Return a string showing the buffer octets, with MSB on the left.\r\n   *\r\n   * @param sep separator string. default is '' (empty string)\r\n   */\r\n  toOctetString = (sep: string) => {\r\n    var out = new Array(8);\r\n    var b = this.buffer,\r\n      o = this.offset;\r\n    for (var i = 0; i < 8; i++) {\r\n      out[i] = _HEX[b[o + i]];\r\n    }\r\n    return out.join(sep || '');\r\n  };\r\n\r\n  /**\r\n   * Returns the int64's 8 bytes in a buffer.\r\n   *\r\n   * @param {bool} [rawBuffer=false]  If no offset and this is true, return the internal buffer.  Should only be used if\r\n   *                                  you're discarding the Int64 afterwards, as it breaks encapsulation.\r\n   */\r\n  toBuffer = (rawBuffer: boolean) => {\r\n    if (rawBuffer && this.offset === 0) return this.buffer;\r\n\r\n    var out = new Buffer(8);\r\n    this.buffer.copy(out, 0, this.offset, this.offset + 8);\r\n    return out;\r\n  };\r\n\r\n  /**\r\n   * Copy 8 bytes of int64 into target buffer at target offset.\r\n   *\r\n   * @param {Buffer} targetBuffer       Buffer to copy into.\r\n   * @param {number} [targetOffset=0]   Offset into target buffer.\r\n   */\r\n  copy = (targetBuffer: Buffer, targetOffset: number) => {\r\n    this.buffer.copy(targetBuffer, targetOffset || 0, this.offset, this.offset + 8);\r\n  };\r\n\r\n  /**\r\n   * Returns a number indicating whether this comes before or after or is the\r\n   * same as the other in sort order.\r\n   *\r\n   * @param {Int64} other  Other Int64 to compare.\r\n   */\r\n  compare = (other: any) => {\r\n    // If sign bits differ ...\r\n    if ((this.buffer[this.offset] & 0x80) != (other.buffer[other.offset] & 0x80)) {\r\n      return other.buffer[other.offset] - this.buffer[this.offset];\r\n    }\r\n\r\n    // otherwise, compare bytes lexicographically\r\n    for (var i = 0; i < 8; i++) {\r\n      if (this.buffer[this.offset + i] !== other.buffer[other.offset + i]) {\r\n        return this.buffer[this.offset + i] - other.buffer[other.offset + i];\r\n      }\r\n    }\r\n    return 0;\r\n  };\r\n\r\n  /**\r\n   * Returns a boolean indicating if this integer is equal to other.\r\n   *\r\n   * @param {Int64} other  Other Int64 to compare.\r\n   */\r\n  equals = (other: any) => {\r\n    return this.compare(other) === 0;\r\n  };\r\n\r\n  /**\r\n   * Pretty output in console.log\r\n   */\r\n  inspect = () => {\r\n    return '[Int64 value:' + this + ' octets:' + this.toOctetString(' ') + ']';\r\n  };\r\n}\r\n\r\nexport default Int64;\r\n","import Crc32 from '../utils/crc32';\r\nimport Int64 from '../utils/Int64';\r\nimport SavvyFile from '../file';\r\nimport Transfer from '../transfer';\r\n\r\n/**\r\n * get a ziped buffer of origin buffer from http request\r\n * @param {SavvyFile} currentFile file which being downloaded\r\n * @param {Transfer} transfer transfer which being ziped (might has multiply files)\r\n * @param {ArrayBuffer} _buffer buffer which need be processed\r\n * @param {boolean} isLast indicates if this buffer is the last chunk of the last file belong to current transfer\r\n *\r\n * @returns {Promise<ArrayBuffer>}\r\n */\r\nexport async function zipBuffer(currentFile: SavvyFile, transfer: Transfer, _buffer: ArrayBuffer, isLast: boolean): Promise<ArrayBuffer> {\r\n  // part of the current file.\r\n  let buffer: Uint8Array = new Uint8Array(_buffer);\r\n\r\n  let crc: number = Crc32(buffer, currentFile.crc || 0, buffer.byteLength);\r\n  let ziper: ZIPClass = new ZIPClass(transfer.fileSize);\r\n\r\n  let fileName: string = unescape(encodeURIComponent(currentFile.name));\r\n  currentFile.bufferAcc += buffer.byteLength;\r\n  currentFile.crc = crc;\r\n\r\n  if (currentFile.offset === 0) {\r\n    // begin set header\r\n    currentFile.headerPos = transfer.offset;\r\n    let ebuf: any = ezBuffer(1 + 4 + 4 + fileName.length);\r\n    ebuf.i16(zipUtf8ExtraId);\r\n    ebuf.i16(5 + fileName.length); // size\r\n    ebuf.i8(1); // version\r\n    ebuf.i32(Crc32(fileName));\r\n    ebuf.appendBytes(fileName);\r\n\r\n    let header: Uint8Array = ziper.ZipHeader(fileName, currentFile.fileSize /* TO-DO: add file date */, ebuf.getArray());\r\n\r\n    let d = new Uint8Array(header.byteLength + buffer.byteLength);\r\n    d.set(header, 0);\r\n    d.set(buffer, header.byteLength);\r\n\r\n    buffer = d;\r\n    // console.log('add header');\r\n  }\r\n\r\n  // begin set central directory\r\n  if (currentFile.bufferAcc === currentFile.fileSize) {\r\n    let centralDir = ziper.ZipCentralDirectory(fileName, currentFile.fileSize, currentFile.fileSize, crc, false, currentFile.headerPos);\r\n    // zipFile.dirData.push(centralDir.dirRecord);\r\n    let centralDirBuffer: Uint8Array = centralDir.dataDescriptor;\r\n\r\n    let d = new Uint8Array(buffer.byteLength + centralDirBuffer.byteLength);\r\n    d.set(buffer, 0);\r\n    d.set(centralDirBuffer, buffer.byteLength);\r\n\r\n    buffer = d;\r\n  } else {\r\n    currentFile.offset += buffer.byteLength;\r\n  }\r\n\r\n  if (isLast) {\r\n    let dirRecord = transfer.files.map((file: SavvyFile) => {\r\n      let tmpCentralDir = ziper.ZipCentralDirectory(file.name, file.fileSize, file.fileSize, file.crc, false, file.headerPos);\r\n\r\n      return tmpCentralDir.dirRecord;\r\n    });\r\n    let end = ziper.ZipSuffix(buffer.byteLength + transfer.offset, dirRecord);\r\n    let dirData: any[] = transfer.files.map(\r\n      (file: SavvyFile) => ziper.ZipCentralDirectory(unescape(encodeURIComponent(file.name)), file.fileSize, file.fileSize, file.crc, false, file.headerPos).dirRecord\r\n    );\r\n\r\n    let tmpSize: number = 0,\r\n      tmpOffset: number = buffer.byteLength,\r\n      tmpBuf: Uint8Array;\r\n\r\n    for (let i in dirData) {\r\n      tmpSize += dirData[i].byteLength;\r\n    }\r\n\r\n    tmpBuf = new Uint8Array(buffer.byteLength + tmpSize + end.byteLength);\r\n\r\n    tmpBuf.set(buffer, 0);\r\n\r\n    for (let i in dirData) {\r\n      tmpBuf.set(dirData[i], tmpOffset);\r\n      tmpOffset += dirData[i].byteLength;\r\n    }\r\n\r\n    console.log(end);\r\n    tmpBuf.set(end, tmpOffset);\r\n\r\n    buffer = tmpBuf;\r\n  }\r\n\r\n  transfer.offset += buffer.byteLength;\r\n\r\n  return new Promise((resolve: Function, reject: Function) => {\r\n    resolve(buffer);\r\n  });\r\n}\r\n\r\nconst fileHeaderLen: number = 30;\r\nconst noCompression: number = 0;\r\nconst defaultFlags: number = 0x808; /* UTF-8 */\r\nconst i32max: number = 0xffffffff;\r\nconst i16max: number = 0xffff;\r\nconst zip64ExtraId: number = 0x0001;\r\nconst zipUtf8ExtraId: number = 0x7075;\r\nconst directory64LocLen: number = 20;\r\nconst directory64EndLen: number = 56;\r\nconst directoryEndLen: number = 22;\r\nconst fileHeaderSignature: number = 0x04034b50;\r\nconst directory64LocSignature: number = 0x07064b50;\r\nconst directory64EndSignature: number = 0x06064b50;\r\nconst directoryEndSignature: number = 0x06054b50;\r\nconst dataDescriptorSignature: number = 0x08074b50; // de-facto standard; required by OS X Finder\r\nconst directoryHeaderSignature: number = 0x02014b50;\r\nconst dataDescriptorLen: number = 16;\r\nconst dataDescriptor64Len: number = 24;\r\nconst directoryHeaderLen: number = 46;\r\n\r\nclass ZIPClass {\r\n  private maxZipSize: number = Math.pow(2, 31) * 0.9;\r\n  private isZip64: boolean = false;\r\n  private zipVersion: number = 20;\r\n\r\n  constructor(totalSize: number) {\r\n    this.isZip64 = totalSize > this.maxZipSize || localStorage.zip64 === 1;\r\n    this.zipVersion = this.isZip64 ? 45 : 20;\r\n  }\r\n\r\n  ZipHeader(fileName: string, fileSize: number, extra: number[]) {\r\n    let readerVersion: number = this.zipVersion,\r\n      Flags: number = defaultFlags,\r\n      Method: number = noCompression,\r\n      date: number = 0,\r\n      crc32: number = 0,\r\n      unsize: number = 0;\r\n\r\n    let buf = ezBuffer(fileHeaderLen + fileName.length + extra.length);\r\n    buf.i32(fileHeaderSignature);\r\n    buf.i16(readerVersion);\r\n    buf.i16(Flags);\r\n    buf.i16(Method);\r\n    DosDateTime(date, buf);\r\n    buf.i32(crc32); // crc32\r\n    buf.i32(fileSize); // compress size\r\n    buf.i32(unsize); // uncompress size\r\n    buf.i16(fileName.length);\r\n    buf.i16(extra.length);\r\n    buf.appendBytes(fileName);\r\n    buf.appendBytes(extra);\r\n\r\n    return buf.getBytes();\r\n  }\r\n  /**\r\n   * @param {number} size compressed size\r\n   * @param {number} unsize uncompress size\r\n   * @param {number} crc32\r\n   * @param {boolean} directory\r\n   * @param {number} headerpos header position\r\n   */\r\n\r\n  ZipCentralDirectory(filename: string, size: number, unsize: number, crc32: number, directory: boolean, headerpos: number) {\r\n    let creatorVersion: number = this.zipVersion;\r\n    let readerVersion: number = this.zipVersion;\r\n    let Flags: number = defaultFlags;\r\n    let Method: number = noCompression;\r\n    let date: number = 0;\r\n    let externalAttr: number = directory ? 1 : 0;\r\n\r\n    let extra: number[] = [],\r\n      ebuf: any;\r\n\r\n    if (this.isZip64) {\r\n      ebuf = ezBuffer(28); // 2xi16 + 3xi64\r\n      ebuf.i16(zip64ExtraId);\r\n      ebuf.i16(24);\r\n      ebuf.i64(size);\r\n      ebuf.i64(unsize);\r\n      ebuf.i64(headerpos);\r\n      extra = extra.concat(ebuf.getArray());\r\n    }\r\n\r\n    var centralDirectoryBuf = ezBuffer(directoryHeaderLen + filename.length + extra.length);\r\n    centralDirectoryBuf.i32(directoryHeaderSignature);\r\n    centralDirectoryBuf.i16(creatorVersion);\r\n    centralDirectoryBuf.i16(readerVersion);\r\n    centralDirectoryBuf.i16(Flags);\r\n    centralDirectoryBuf.i16(Method);\r\n    DosDateTime(date, centralDirectoryBuf);\r\n    centralDirectoryBuf.i32(crc32);\r\n    centralDirectoryBuf.i32(this.isZip64 ? i32max : size);\r\n    centralDirectoryBuf.i32(this.isZip64 ? i32max : unsize);\r\n    centralDirectoryBuf.i16(filename.length);\r\n    centralDirectoryBuf.i16(extra.length);\r\n    centralDirectoryBuf.i16(0); // no comments\r\n    centralDirectoryBuf.i32(0); // disk number\r\n    centralDirectoryBuf.i32(externalAttr);\r\n    centralDirectoryBuf.i32(this.isZip64 ? i32max : headerpos);\r\n    centralDirectoryBuf.appendBytes(filename);\r\n    centralDirectoryBuf.appendBytes(extra);\r\n\r\n    var dataDescriptorBuf = ezBuffer(this.isZip64 ? dataDescriptor64Len : dataDescriptorLen);\r\n    dataDescriptorBuf.i32(dataDescriptorSignature);\r\n    dataDescriptorBuf.i32(crc32);\r\n    if (this.isZip64) {\r\n      dataDescriptorBuf.i64(size);\r\n      dataDescriptorBuf.i64(unsize);\r\n    } else {\r\n      dataDescriptorBuf.i32(size);\r\n      dataDescriptorBuf.i32(unsize);\r\n    }\r\n\r\n    return {\r\n      dirRecord: centralDirectoryBuf.getBytes(),\r\n      dataDescriptor: dataDescriptorBuf.getBytes()\r\n    };\r\n  }\r\n\r\n  ZipSuffix(pos: number, dirData: Uint8Array[]) {\r\n    var dirDatalength = 0;\r\n    for (var i in dirData) {\r\n      dirDatalength += dirData[i].length;\r\n    }\r\n\r\n    var buf = ezBuffer(22);\r\n    if (this.isZip64) {\r\n      var xbuf = ezBuffer(directory64EndLen + directory64LocLen);\r\n      xbuf.i32(directory64EndSignature);\r\n      // directory64EndLen - 4 bytes - 8 bytes\r\n      xbuf.i64(directory64EndLen - 4 - 8);\r\n      xbuf.i16(this.zipVersion);\r\n      xbuf.i16(this.zipVersion);\r\n      xbuf.i32(0); // disk number\r\n      xbuf.i32(0); // number of the disk with the start of the central directory\r\n      xbuf.i64(dirData.length);\r\n      xbuf.i64(dirData.length);\r\n      xbuf.i64(dirDatalength);\r\n      xbuf.i64(pos);\r\n\r\n      xbuf.i32(directory64LocSignature);\r\n      xbuf.i32(0);\r\n      xbuf.i64(pos + dirDatalength);\r\n      xbuf.i32(1); // total number of disks\r\n      buf.resize(22 + xbuf.getBytes().length);\r\n      buf.appendBytes(xbuf.getBytes());\r\n    }\r\n\r\n    buf.i32(directoryEndSignature);\r\n    buf.i32(0); // skip\r\n    buf.i16(this.isZip64 ? i16max : dirData.length);\r\n    buf.i16(this.isZip64 ? i16max : dirData.length);\r\n    buf.i32(this.isZip64 ? i32max : dirDatalength);\r\n    buf.i32(this.isZip64 ? i32max : pos);\r\n    buf.i16(0); // no comments\r\n\r\n    return buf.getBytes();\r\n  }\r\n}\r\n\r\nfunction ezBuffer(size: number) {\r\n  var obj = new Uint8Array(size),\r\n    buffer = new DataView(obj.buffer),\r\n    offset = 0;\r\n  return {\r\n    debug: function() {\r\n      console.error(['DEBUG', offset, obj.length]);\r\n    },\r\n    getArray: function(): number[] {\r\n      let bytes: number[] = [];\r\n      obj.map(\r\n        (val: number, i: number, array: Uint8Array): number => {\r\n          bytes.push(val);\r\n\r\n          return val;\r\n        }\r\n      );\r\n      return bytes;\r\n    },\r\n    getBytes: function() {\r\n      return obj;\r\n    },\r\n    appendBytes: function(text: number[] | Uint8Array | string) {\r\n      var isArray = typeof text != 'string';\r\n      for (var i = text.length; i--; ) {\r\n        if (isArray) {\r\n          obj[offset + i] = (text as number[] | Uint8Array)[i];\r\n        } else {\r\n          // We assume it is an string\r\n          obj[offset + i] = (text as string).charCodeAt(i);\r\n        }\r\n      }\r\n      offset += text.length;\r\n    },\r\n    i64: function(number: number, bigendian?: boolean) {\r\n      var buffer = new Int64(number, null).buffer;\r\n      if (!bigendian) {\r\n        // swap the by orders\r\n        var nbuffer = new Uint8Array(buffer.length),\r\n          len = buffer.length - 1;\r\n        for (var i = len; i >= 0; i--) {\r\n          nbuffer[i] = buffer[len - i];\r\n        }\r\n        buffer = nbuffer;\r\n      }\r\n      // append the buffer\r\n      this.appendBytes(buffer);\r\n    },\r\n    i32: function(number: number, bigendian?: boolean) {\r\n      buffer.setInt32(offset, number, !bigendian);\r\n      offset += 4;\r\n    },\r\n    i16: function(number: number, bigendian?: boolean) {\r\n      buffer.setInt16(offset, number, !bigendian);\r\n      offset += 2;\r\n    },\r\n    i8: function(number: number, bigendian?: boolean) {\r\n      buffer.setInt8(offset, number);\r\n      offset += 1;\r\n    },\r\n    resize: function(newsize: number) {\r\n      let zobj = new Uint8Array(newsize);\r\n      zobj.set(obj, 0);\r\n      obj = zobj;\r\n      buffer = new DataView(obj.buffer);\r\n      return obj;\r\n    },\r\n    /**\r\n     *  Check if the current bytestream has enough\r\n     *  size to add \"size\" more bytes. If it doesn't have\r\n     *  we return a new bytestream object\r\n     */\r\n    resizeIfNeeded: function(size: number) {\r\n      if (obj.length < size + offset) {\r\n        return this.resize(size + offset);\r\n      }\r\n      return obj;\r\n    }\r\n  };\r\n}\r\n\r\n/**\r\n *  Set an unix time (or now if missing) in the zip\r\n *  expected format\r\n */\r\nfunction DosDateTime(sec: number, buf: any) {\r\n  var date = new Date(),\r\n    dosTime,\r\n    dosDate;\r\n\r\n  if (sec) {\r\n    date = new Date(sec * 1000);\r\n  }\r\n\r\n  dosTime = date.getHours();\r\n  dosTime = dosTime << 6;\r\n  dosTime = dosTime | date.getMinutes();\r\n  dosTime = dosTime << 5;\r\n  dosTime = dosTime | (date.getSeconds() / 2);\r\n\r\n  dosDate = date.getFullYear() - 1980;\r\n  dosDate = dosDate << 4;\r\n  dosDate = dosDate | (date.getMonth() + 1);\r\n  dosDate = dosDate << 5;\r\n  dosDate = dosDate | date.getDate();\r\n\r\n  buf.i16(dosTime);\r\n  buf.i16(dosDate);\r\n}\r\n","import SavvyIO from './IO';\r\nimport { filemime } from '../utils/index';\r\nimport { zipBuffer } from './zip';\r\nimport Transfer from '../transfer';\r\n\r\nconst customWindow: any = window;\r\nconst TEMPORARY: number = 0;\r\nconst PERSISTENT: number = 1;\r\n\r\nexport default class FilesystemIO extends SavvyIO {\r\n  private freeSpaceRequest: boolean = false;\r\n  private entrtiesReaded: boolean = false;\r\n  private allEntries: Entry[] = [];\r\n  private allResumeFiles: Array<Transfer> = [];\r\n  constructor() {\r\n    super();\r\n    customWindow.requestFileSystem = customWindow.requestFileSystem || customWindow.webkitRequestFileSystem;\r\n    // window.requestFileSystem(type, size, successCallback[, errorCallback]);\r\n    customWindow.requestFileSystem(TEMPORARY, 0x10000, (fs: FileSystem) => {\r\n      // free space....\r\n      fs.root.getDirectory('savvy', { create: true }, (directoryEntry: DirectoryEntry) => {\r\n        let dirReader: DirectoryReader = directoryEntry.createReader();\r\n\r\n        dirReader.readEntries((entries: Entry[]) => {\r\n          // TO-DO: can not just simply clear all old files, need to keep files which are not completely downloaded.\r\n          // console.log(entries);\r\n          this.allEntries = entries;\r\n          this.entrtiesReaded = true;\r\n          if (this.freeSpaceRequest) {\r\n            this.freeSpace(this.allResumeFiles);\r\n          }\r\n        });\r\n      });\r\n    });\r\n  }\r\n  public removeFile(transfer: Transfer): Promise<undefined> {\r\n    return new Promise((resolve: Function, reject: Function) => {\r\n      customWindow.requestFileSystem(TEMPORARY, 0x10000, (fs: FileSystem) => {\r\n        fs.root.getDirectory('savvy', { create: true }, (directoryEntry: DirectoryEntry) => {\r\n          let dirReader: DirectoryReader = directoryEntry.createReader();\r\n\r\n          dirReader.readEntries((entries: Entry[]) => {\r\n            entries.forEach((entry: Entry) => {\r\n              // TO-DO: need check if this file is being write to filesystem...\r\n              if (entry.name === transfer.name + transfer.id) {\r\n                entry.remove(() => {\r\n                  console.log('remove file [' + entry.name + '] from filesystem successful.');\r\n\r\n                  resolve();\r\n                });\r\n              }\r\n            });\r\n          });\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  public removeAll() {\r\n    customWindow.requestFileSystem(TEMPORARY, 0x10000, (fs: FileSystem) => {\r\n      // free space....\r\n      fs.root.getDirectory('savvy', { create: true }, (directoryEntry: DirectoryEntry) => {\r\n        let dirReader: DirectoryReader = directoryEntry.createReader();\r\n\r\n        dirReader.readEntries((entries: Entry[]) => {\r\n          // TO-DO: can not just simply clear all old files, need to keep files which are not completely downloaded.\r\n          entries.map((entry: Entry) => {\r\n            entry.remove(() => {\r\n              console.log('remove file [' + entry.name + '] from filesystem successful.');\r\n            });\r\n          });\r\n        });\r\n      });\r\n    });\r\n  }\r\n  /**\r\n   * @param {Transfer} transfer\r\n   * @param {Function} successCallback\r\n   * @param {Function} errorCallback\r\n   */\r\n  public getFileWriter(transfer: Transfer, successCallback: Function, errorCallback: Function): void {\r\n    customWindow.requestFileSystem(TEMPORARY, transfer.fileSize, (fs: FileSystem) => {\r\n      fs.root.getDirectory('savvy', { create: true }, (directoryEntry: DirectoryEntry) => {\r\n        fs.root.getFile('savvy/' + transfer.name + transfer.id, { create: true }, (fileEntry: FileEntry) => {\r\n          fileEntry.getMetadata((metadata: Metadata) => {\r\n            // console.log(metadata);\r\n            fileEntry.createWriter((fw: FileWriter) => {\r\n              if (metadata.size && metadata.size !== 0) {\r\n                // set offset as file size, the plus op may not effective\r\n                if (transfer.offset === metadata.size) {\r\n                  // console.log(file.offset, metadata.size);\r\n                  fw.seek(transfer.offset + 1);\r\n                } else if (transfer.offset < metadata.size) {\r\n                  // console.log(file.offset + ' ,' + metadata.size + ' - finally find u!');\r\n                  fw.onwriteend = () => {\r\n                    fw.seek(transfer.offset + 1);\r\n                    successCallback({\r\n                      fileEntry: fileEntry,\r\n                      fileWriter: fw\r\n                    });\r\n\r\n                    return;\r\n                  };\r\n\r\n                  fw.truncate(transfer.offset);\r\n                } else {\r\n                  fw.seek(0);\r\n\r\n                  transfer.abortAllResumeData();\r\n                }\r\n              }\r\n              successCallback({\r\n                fileEntry: fileEntry,\r\n                fileWriter: fw\r\n              });\r\n            });\r\n          });\r\n        });\r\n      });\r\n    });\r\n  }\r\n  public freeSpace(transfers: Transfer[]): void {\r\n    if (this.entrtiesReaded) {\r\n      this.freeSpaceRequest = false;\r\n      this.allEntries.forEach((entry: Entry) => {\r\n        let tmpTransfer: Transfer | undefined = transfers.find((transfer: Transfer) => transfer.name + transfer.id === entry.name);\r\n        // this file need be remove.\r\n        if (tmpTransfer === undefined) {\r\n          entry.remove(\r\n            () => {\r\n              console.log(entry.name + ' removed.');\r\n            },\r\n            (err: DOMError) => {}\r\n          );\r\n        }\r\n      });\r\n    } else {\r\n      this.allResumeFiles = transfers;\r\n      this.freeSpaceRequest = true;\r\n    }\r\n  }\r\n  /**\r\n   * @param {Transfer} transfer\r\n   * @param {ArrayBuffer} buffer\r\n   */\r\n  public write(transfer: Transfer, buffer: ArrayBuffer): Promise<any> {\r\n    return new Promise((resolve, reject) => {\r\n      if (transfer.fileWriter) {\r\n        let fileWriter: FileWriter = transfer.fileWriter as FileWriter;\r\n        if (transfer.zip) {\r\n          // get processed data from zip writer\r\n          zipBuffer(transfer.currentFile, transfer, buffer, transfer.chunkIndex === transfer.chunkList.length).then((zipBuffer: ArrayBuffer) => {\r\n            try {\r\n              fileWriter.onwriteend = (e: ProgressEvent) => {\r\n                resolve();\r\n              };\r\n              fileWriter.write(new Blob([zipBuffer]));\r\n            } catch (e) {\r\n              console.log(e);\r\n              reject();\r\n            }\r\n          });\r\n        } else {\r\n          try {\r\n            fileWriter.onwriteend = (e: ProgressEvent) => {\r\n              resolve();\r\n            };\r\n            fileWriter.write(new Blob([buffer]));\r\n          } catch (e) {\r\n            console.log(e);\r\n            reject();\r\n          }\r\n        }\r\n      } else {\r\n        console.log('file has no file writer');\r\n        reject();\r\n      }\r\n    });\r\n  }\r\n  /**\r\n   * do not delete file while it's being copied from FS to DL folder\r\n   * conservative assumption that a file is being written at 1024 bytes per ms\r\n   * add 30000 ms margin\r\n   */\r\n  public deleteFile(transfer: Transfer): void {\r\n    // let assume\r\n    if (transfer.fileEntry) {\r\n      let _file = transfer.fileEntry as FileEntry;\r\n      if (_file.isFile) {\r\n        _file.getMetadata(\r\n          (metadata: Metadata) => {\r\n            let delTime: number = metadata.size / 1024 + 30000;\r\n            setTimeout(() => {\r\n              _file.remove(() => {\r\n                console.log('file ' + transfer.name + ' being removed from filesystem...');\r\n              });\r\n            }, delTime);\r\n          },\r\n          (err: DOMError) => {\r\n            console.log(err);\r\n          }\r\n        );\r\n      }\r\n      /* (file.fileEntry as FileEntry).file((_file: File) =>{\r\n        _file.get\r\n      }, (err: DOMError) =>{\r\n        console.log(err);\r\n      }) */\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {Transfer[]}transfers\r\n   * @public\r\n   */\r\n  public download(transfers: Array<Transfer>): void {\r\n    for (let i: number = 0, l: number = transfers.length; i < l; i++) {\r\n      let fileEntry: FileEntry = transfers[i].fileEntry as FileEntry;\r\n      if (typeof transfers[i].fileEntry.file === 'function') {\r\n        try {\r\n          fileEntry.file(\r\n            (file: File) => {\r\n              this.saveFile(transfers[i], file);\r\n            },\r\n            () => {\r\n              this.saveLink(transfers[i]);\r\n            }\r\n          );\r\n        } catch (e) {\r\n          console.log(e);\r\n        }\r\n      } else {\r\n        this.saveLink(transfers[i]);\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * @param {Transfer}transfer\r\n   * @param {String?}objectURL\r\n   * @private\r\n   */\r\n  private saveLink = (transfer: Transfer, objectURL?: string) => {\r\n    let link: string | false = typeof objectURL === 'string' && objectURL;\r\n    let dlLinkNode: HTMLAnchorElement = document.createElement('a');\r\n\r\n    dlLinkNode.download = transfer.name;\r\n    dlLinkNode.href = link || transfer.fileEntry.toURL();\r\n\r\n    dlLinkNode.click();\r\n  };\r\n  /**\r\n   * @param {Transfer}transfer\r\n   * @param {File}file\r\n   * @private\r\n   */\r\n  private saveFile = (transfer: Transfer, file: File) => {\r\n    try {\r\n      let _file: File = new File([file], transfer.name, {\r\n        type: filemime(transfer.name)\r\n      });\r\n\r\n      this.saveLink(transfer, window.URL.createObjectURL(_file));\r\n    } catch (ex) {\r\n      console.log(ex);\r\n      this.saveLink(transfer);\r\n    }\r\n  };\r\n}\r\n","import SavvyIO from './IO';\r\nimport { filemime } from '../utils/index';\r\nimport Transfer from '../transfer';\r\nimport { zipBuffer } from './zip';\r\n\r\nconst MSIE: boolean = typeof MSBlobBuilder === 'function';\r\nexport default class MemoryIO extends SavvyIO {\r\n  public getFileWriter(transfer: Transfer, successCallback: Function, errorCallback: Function): void {\r\n    successCallback({\r\n      fileEntry: null,\r\n      fileWriter: new MemoryWrite()\r\n    });\r\n  }\r\n  /**\r\n   * write buffer to memory (just simply push to an array)\r\n   * @param {Transfer} transfer\r\n   * @param {ArrayBuffer} buffer\r\n   */\r\n  public write(transfer: Transfer, buffer: ArrayBuffer): Promise<undefined> {\r\n    return new Promise((resolve: Function, reject: Function) => {\r\n      let fileWriter: MemoryWrite = transfer.fileWriter as MemoryWrite;\r\n      if (transfer.zip) {\r\n        zipBuffer(transfer.currentFile, transfer, buffer, transfer.chunkIndex === transfer.chunkList.length).then((zipBuffer: ArrayBuffer) => {\r\n          try {\r\n            fileWriter.onwriteend = (e: ProgressEvent) => {\r\n              resolve();\r\n            };\r\n            fileWriter.write(new Blob([zipBuffer]));\r\n          } catch (e) {\r\n            console.log(e);\r\n            reject();\r\n          }\r\n        });\r\n      } else {\r\n        fileWriter.onwriteend = () => {\r\n          resolve();\r\n        };\r\n        fileWriter.onerror = (e: Error) => {\r\n          reject();\r\n        };\r\n\r\n        fileWriter.write(new Blob([buffer]));\r\n      }\r\n    });\r\n  }\r\n  /**\r\n   * empty buffer array.\r\n   * @param {Transfer} transfer\r\n   */\r\n  public deleteFile(transfer: Transfer): void {\r\n    (transfer.fileWriter as MemoryWrite).clear();\r\n    transfer.fileWriter = null;\r\n  }\r\n  /**\r\n   * 1. get Blob from buffer array\r\n   * 2. generate an `<a>` tag and trigger click event to download Blob as file.\r\n   * @param {Array<Transfer>} transfers\r\n   */\r\n  public download(transfers: Array<Transfer>): void {\r\n    for (let i: number = 0, l: number = transfers.length; i < l; i++) {\r\n      let blob: Blob = (transfers[i].fileWriter as MemoryWrite).getBlob(transfers[i].name);\r\n      let blob_url: string = '';\r\n      if (MSIE) {\r\n        navigator.msSaveOrOpenBlob(blob, name);\r\n      } else {\r\n        blob_url = window.URL.createObjectURL(blob);\r\n        let dlLinkNode: HTMLAnchorElement = document.createElement('a');\r\n        dlLinkNode.download = transfers[i].name;\r\n        dlLinkNode.href = blob_url;\r\n        document.body.appendChild(dlLinkNode);\r\n\r\n        // this click may triggers beforeunload...\r\n        dlLinkNode.click();\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport class MemoryWrite {\r\n  private blobList: MSBlobBuilder | Blob[];\r\n  public onwriteend: Function | null;\r\n  public onerror: Function | null;\r\n\r\n  public position: number = 0;\r\n  constructor() {\r\n    if (MSIE) {\r\n      this.blobList = new MSBlobBuilder();\r\n    } else {\r\n      this.blobList = [];\r\n    }\r\n\r\n    this.onwriteend = null;\r\n    this.onerror = null;\r\n  }\r\n\r\n  public getBlob(name: string): Blob {\r\n    if (MSIE) {\r\n      return (this.blobList as MSBlobBuilder).getBlob();\r\n    }\r\n    try {\r\n      return new File(this.blobList as Blob[], name, { type: filemime(name) });\r\n    } catch (ex) {\r\n      console.log(ex);\r\n    }\r\n    return new Blob((this.blobList as Blob[]) || [], { type: filemime(name) });\r\n  }\r\n\r\n  public write(buffer: Blob) {\r\n    try {\r\n      if (MSIE) {\r\n        (this.blobList as MSBlobBuilder).append(buffer);\r\n      } else {\r\n        (this.blobList as Blob[]).push(buffer);\r\n      }\r\n\r\n      this.onwriteend && this.onwriteend();\r\n    } catch (e) {\r\n      console.log(e);\r\n      this.onerror && this.onerror(e);\r\n    }\r\n  }\r\n\r\n  public clear() {\r\n    this.blobList = [];\r\n  }\r\n}\r\n","import { TChunk } from './interface';\r\n\r\nexport default class SavvyFile {\r\n  public chunkList: TChunk[] = [];\r\n\r\n  public filePath: string;\r\n  public name: string;\r\n  public fileSize: number;\r\n\r\n  public offset: number = 0;\r\n  public crc: number = 0;\r\n  public headerPos: number = 0;\r\n  public bufferAcc: number = 0;\r\n\r\n  constructor(path: string, name: string, fileSize: number, chunkSize: number, buffacc?: number, offset?: number, crc?: number) {\r\n    this.filePath = path;\r\n    this.name = name;\r\n    this.fileSize = fileSize;\r\n\r\n    this.bufferAcc = buffacc || 0;\r\n    this.offset = offset || 0;\r\n    this.crc = crc || 0;\r\n\r\n    let tmpStart: number = 0,\r\n      tmpEnd: number = 0;\r\n    while (tmpEnd < this.fileSize) {\r\n      tmpEnd = tmpStart + chunkSize;\r\n      tmpEnd = tmpEnd > this.fileSize ? this.fileSize : tmpEnd;\r\n      this.chunkList.push({\r\n        filePath: this.filePath,\r\n        start: tmpStart,\r\n        end: tmpEnd\r\n      });\r\n      tmpStart = tmpEnd + 1;\r\n    }\r\n  }\r\n}\r\n","import SavvyFile from './file';\r\nimport FilesystemIO from './methods/filesystem';\r\nimport MemoryIO, { MemoryWrite } from './methods/memory';\r\nimport { TStatus, TChunk } from './interface';\r\nimport TransferProcesser from './processer';\r\nimport { filetype } from './utils';\r\n\r\nexport default class Transfer {\r\n  public files: SavvyFile[];\r\n  public name: string;\r\n  public fileType: string = 'File';\r\n  public IO: FilesystemIO | MemoryIO;\r\n  public _status: TStatus = 'initializing';\r\n  public zip: boolean;\r\n\r\n  public id: number;\r\n  public offset: number;\r\n  public chunkIndex: number;\r\n  public chunkList: TChunk[];\r\n  public totalSize: number;\r\n  public fileSize: number; //include\r\n  public remainSize: number;\r\n\r\n  public fileWriter: FileWriter | MemoryWrite | null = null;\r\n  public fileEntry: any;\r\n  public progressHandle: Function;\r\n  public statusUpdateHandle: Function;\r\n\r\n  public processer: TransferProcesser | null = null;\r\n  public lock: boolean = false;\r\n  public paused: boolean = false;\r\n\r\n  public speed: number = 0;\r\n  public startTime: number = 0;\r\n\r\n  constructor(\r\n    files: SavvyFile[],\r\n    name: string,\r\n    IO: FilesystemIO | MemoryIO,\r\n    progressHandle: Function,\r\n    statusUpdateHandle: Function,\r\n    zip: boolean,\r\n    chunkIndex?: number,\r\n    id?: number,\r\n    offset?: number,\r\n    resumed?: boolean\r\n  ) {\r\n    this.files = files;\r\n    this.name = name;\r\n    this.fileType = filetype(this.name);\r\n    this.IO = IO;\r\n    this.id = id || new Date().getTime();\r\n    this.zip = zip;\r\n\r\n    // set file size\r\n    // -----------------------------------------------------------------\r\n    this.totalSize = files.reduce((prev: number, cur: SavvyFile) => prev + cur.fileSize, 0);\r\n    this.fileSize = 0;\r\n    if (zip) {\r\n      for (let i: number = 0, l: number = files.length; i < l; i++) {\r\n        this.fileSize += files[i].fileSize + 30 + 9 + 2 * files[i].name.length /* header */ + 46 + files[i].name.length /* dirRecord */;\r\n      }\r\n      // extra bytes for each ZipCentralDirectory\r\n      this.fileSize += files.length * 28;\r\n      // extra bytes for each dataDescriptor\r\n      this.fileSize += files.length * 24;\r\n      // final bytes\r\n      this.fileSize += 98;\r\n    } else {\r\n      this.fileSize = this.totalSize;\r\n    }\r\n\r\n    // -----------------------------------------------------------------\r\n    this.chunkList = files.reduce((pre: TChunk[], file: SavvyFile) => pre.concat(file.chunkList), []);\r\n    this.offset = offset || 0;\r\n    this.chunkIndex = chunkIndex || 0;\r\n    if (this.chunkIndex === this.chunkList.length) {\r\n      this.remainSize = 0;\r\n    } else if (this.chunkIndex !== 0) {\r\n      this.remainSize =\r\n        this.totalSize -\r\n        this.chunkList.reduce((acc: number, cur: TChunk, index: number) => {\r\n          if (index < this.chunkIndex) {\r\n            acc += cur.end - (cur.start === 0 ? 0 : cur.start - 1);\r\n          } else {\r\n            acc += 0;\r\n          }\r\n\r\n          return acc;\r\n        }, 0);\r\n    } else {\r\n      this.remainSize = this.totalSize;\r\n    }\r\n\r\n    this.progressHandle = progressHandle;\r\n    this.statusUpdateHandle = statusUpdateHandle;\r\n  }\r\n\r\n  public init = (): Promise<undefined> => {\r\n    return new Promise((resolve: Function, reject: Function) => {\r\n      this.IO.getFileWriter(\r\n        this,\r\n        (result: { fileEntry: FileEntry; fileWriter: FileWriter }) => {\r\n          this.fileWriter = result.fileWriter;\r\n          this.fileEntry = result.fileEntry;\r\n          console.log('fileWriter position' + result.fileWriter.position);\r\n          if (this.status !== 'abort') {\r\n            this.status = 'inited';\r\n          }\r\n          resolve();\r\n        },\r\n        reject\r\n      );\r\n    });\r\n  };\r\n\r\n  public abortAllResumeData() {\r\n    this.chunkIndex = 0;\r\n    this.remainSize = this.totalSize;\r\n    this.offset = 0;\r\n    this.files.forEach((file: SavvyFile) => {\r\n      file.offset = file.bufferAcc = 0;\r\n    });\r\n  }\r\n\r\n  public update = (length: number) => {\r\n    if (this.status === 'inited') {\r\n      this.status = 'downloading';\r\n    }\r\n\r\n    let tmpEndTime: number = new Date().getTime();\r\n    let duration: number = tmpEndTime - this.startTime;\r\n\r\n    // console.log('chunk ' + this.chunklist[this.nowChunkIndex - 1].start + '-' + this.chunklist[this.nowChunkIndex - 1].end + ' request complete at ' + tmpEndTime);\r\n    this.speed = (length / duration) * 1000;\r\n    this.remainSize -= length;\r\n\r\n    this.progressHandle && this.progressHandle(this.id, this.speed, this.remainSize, this.status);\r\n  };\r\n\r\n  public nextChunk(): TChunk {\r\n    this.startTime = new Date().getTime();\r\n    // make sure next chunk is available when status not chunk_empty\r\n    if (!this.chunkList[this.chunkIndex + 1]) {\r\n      this.status = 'chunk_empty';\r\n    }\r\n\r\n    // console.log('request chunk: ' + this.chunklist[this.nowChunkIndex].start + '-' + this.chunklist[this.nowChunkIndex].end + ' at ' + this.startTime);\r\n    return this.chunkList[this.chunkIndex++];\r\n  }\r\n  public resumePreChunk(): void {\r\n    if (this.status === 'chunk_empty') {\r\n      this.status = 'downloading';\r\n    }\r\n\r\n    this.chunkIndex -= 1;\r\n  }\r\n\r\n  public get status(): TStatus {\r\n    return this._status;\r\n  }\r\n  public set status(new_status: TStatus) {\r\n    this._status = new_status;\r\n    this.statusUpdateHandle && this.statusUpdateHandle(this.id, new_status);\r\n  }\r\n  /**\r\n   * use @function getStatus() to get file's current status instead of accessing it directly\r\n   * so this is done to avoid errors during ts static checking\r\n   * @ref https://github.com/Microsoft/TypeScript/issues/29155\r\n   */\r\n  public getStatus = (): TStatus => {\r\n    return this._status;\r\n  };\r\n\r\n  public get currentFile(): SavvyFile {\r\n    let tmpNowChunkIndex = this.chunkIndex - 1;\r\n    let numChunks: number = 0;\r\n    let tmpNowFile: SavvyFile = this.files[0];\r\n\r\n    for (let i = 0, l = this.files.length; i < l; i++) {\r\n      numChunks += this.files[i].chunkList.length;\r\n      if (tmpNowChunkIndex < numChunks) {\r\n        tmpNowFile = this.files[i];\r\n        break;\r\n      }\r\n    }\r\n    return tmpNowFile;\r\n  }\r\n}\r\n","import Transfer from './transfer';\r\nimport { TChunk } from './interface';\r\nimport SavvyTransfer from '.';\r\n\r\nexport default class TransferProcesser {\r\n  public idle: boolean = true;\r\n  public transfer: Transfer | null = null;\r\n  /**\r\n   * use @function getStatus() to get file's current status instead of accessing it directly\r\n   * so this is done to avoid errors during ts static checking\r\n   * @ref https://github.com/Microsoft/TypeScript/issues/29155\r\n   */\r\n  public run(transfer: Transfer, scheduler: SavvyTransfer) {\r\n    transfer.processer = this;\r\n    this.transfer = transfer;\r\n    this.idle = false;\r\n\r\n    if (!transfer.lock) {\r\n      transfer.lock = true;\r\n    }\r\n\r\n    if (!transfer.paused) {\r\n      transfer.status = 'downloading';\r\n      this.process(transfer, scheduler);\r\n    } else {\r\n      transfer.lock = false;\r\n      transfer.processer = null;\r\n      this.idle = true;\r\n      if (transfer.status !== 'abort') {\r\n        transfer.status = 'paused';\r\n      }\r\n    }\r\n  }\r\n  public process = async (transfer: Transfer, scheduler: SavvyTransfer): Promise<undefined> => {\r\n    if (!transfer.paused) {\r\n      if (transfer.getStatus() === 'abort') {\r\n        // delete this file.\r\n        scheduler.schedulingFiles.splice(scheduler.schedulingFiles.findIndex((_transfer: Transfer) => _transfer.id === _transfer.id), 1);\r\n\r\n        this.idle = true;\r\n        this.transfer = null;\r\n        transfer.lock = false;\r\n        transfer.processer = null;\r\n\r\n        scheduler.distributeToProcessers();\r\n        return;\r\n      }\r\n      // no more chunk need be download, should\r\n      if (transfer.chunkIndex >= transfer.chunkList.length) {\r\n        scheduler.IO.download([transfer]);\r\n\r\n        transfer.status = 'complete';\r\n\r\n        scheduler.storeFileForResume(transfer);\r\n        scheduler.IO.deleteFile(transfer);\r\n        scheduler.totalSize -= transfer.fileSize;\r\n        // delete this file.\r\n        scheduler.schedulingFiles.splice(scheduler.schedulingFiles.findIndex((_transfer: Transfer) => _transfer.id === _transfer.id), 1);\r\n\r\n        this.idle = true;\r\n        this.transfer = null;\r\n        transfer.lock = false;\r\n        transfer.processer = null;\r\n\r\n        scheduler.distributeToProcessers();\r\n        return;\r\n      }\r\n\r\n      // need init to get a filewriter\r\n      if (!transfer.fileWriter) {\r\n        await transfer.init();\r\n        this.run(transfer, scheduler);\r\n        return;\r\n      }\r\n\r\n      // file.status should be inited\r\n      this.fetchChunk(transfer, scheduler).catch(\r\n        (error: Error): void => {\r\n          console.log(error);\r\n          transfer.resumePreChunk();\r\n          transfer.paused = true;\r\n          transfer.lock = false;\r\n          transfer.processer = null;\r\n          this.idle = true;\r\n          if (transfer.status !== 'abort') {\r\n            transfer.status = 'error';\r\n          }\r\n        }\r\n      );\r\n      return;\r\n      /* let nextChunk: TChunk = transfer.nextChunk();\r\n      let response: Response = await fetch(nextChunk.filePath, { method: 'GET', headers: { Range: `bytes=${nextChunk.start}-${nextChunk.end}` } });\r\n\r\n      if (transfer.paused) {\r\n        // throw this chunk\r\n        transfer.resumePreChunk();\r\n\r\n        transfer.lock = false;\r\n        transfer.processer = null;\r\n        this.idle = true;\r\n        if (transfer.status !== 'abort') {\r\n          transfer.status = 'paused';\r\n        }\r\n        return;\r\n      }\r\n      let buffer: ArrayBuffer = await response.arrayBuffer();\r\n\r\n      if (transfer.paused) {\r\n        // throw this chunk\r\n        transfer.resumePreChunk();\r\n        transfer.paused = true;\r\n        transfer.lock = false;\r\n        transfer.processer = null;\r\n        this.idle = true;\r\n        if (transfer.status !== 'abort') {\r\n          transfer.status = 'paused';\r\n        }\r\n        return;\r\n      }\r\n\r\n      await scheduler.IO.write(transfer, buffer);\r\n      if (transfer.getStatus() === 'abort') {\r\n        // delete this file.\r\n        scheduler.schedulingFiles.splice(scheduler.schedulingFiles.findIndex((_transfer: Transfer) => _transfer.id === _transfer.id), 1);\r\n\r\n        this.idle = true;\r\n        this.transfer = null;\r\n        transfer.lock = false;\r\n        transfer.processer = null;\r\n\r\n        scheduler.distributeToProcessers();\r\n        return;\r\n      }\r\n      transfer.update(nextChunk.end - (nextChunk.start === 0 ? 0 : nextChunk.start - 1));\r\n\r\n      // console.log(file.name + ' write ' + (file.nowChunkIndex - 1) + ' chunk, scope: ' + nextChunk.start + '-' + nextChunk.end);\r\n      scheduler.storeFileForResume(transfer);\r\n\r\n      this.run(transfer, scheduler); */\r\n    } else {\r\n      if (transfer.status !== 'abort') {\r\n        transfer.status = 'paused';\r\n      }\r\n      transfer.processer = null;\r\n      transfer.lock = false;\r\n      this.idle = true;\r\n    }\r\n  };\r\n\r\n  private async fetchChunk(transfer: Transfer, scheduler: SavvyTransfer): Promise<undefined> {\r\n    let nextChunk: TChunk = transfer.nextChunk();\r\n    let response: Response = await fetch(nextChunk.filePath, { method: 'GET', headers: { Range: `bytes=${nextChunk.start}-${nextChunk.end}` } });\r\n\r\n    if (transfer.paused) {\r\n      // throw this chunk\r\n      this.pausedDuringFetch(transfer);\r\n      return;\r\n    }\r\n    let buffer: ArrayBuffer = await response.arrayBuffer();\r\n\r\n    if (transfer.paused) {\r\n      // throw this chunk\r\n      this.pausedDuringFetch(transfer);\r\n      return;\r\n    }\r\n\r\n    await scheduler.IO.write(transfer, buffer);\r\n    if (transfer.getStatus() === 'abort') {\r\n      // delete this file.\r\n      scheduler.schedulingFiles.splice(scheduler.schedulingFiles.findIndex((_transfer: Transfer) => _transfer.id === _transfer.id), 1);\r\n\r\n      this.idle = true;\r\n      this.transfer = null;\r\n      transfer.lock = false;\r\n      transfer.processer = null;\r\n\r\n      scheduler.distributeToProcessers();\r\n      return;\r\n    }\r\n    transfer.update(nextChunk.end - (nextChunk.start === 0 ? 0 : nextChunk.start - 1));\r\n\r\n    // console.log(file.name + ' write ' + (file.nowChunkIndex - 1) + ' chunk, scope: ' + nextChunk.start + '-' + nextChunk.end);\r\n    scheduler.storeFileForResume(transfer);\r\n\r\n    this.run(transfer, scheduler);\r\n    return;\r\n  }\r\n\r\n  private pausedDuringFetch(transfer: Transfer): void {\r\n    transfer.resumePreChunk();\r\n    transfer.paused = true;\r\n    transfer.lock = false;\r\n    transfer.processer = null;\r\n    this.idle = true;\r\n    if (transfer.status !== 'abort') {\r\n      transfer.status = 'paused';\r\n    }\r\n  }\r\n}\r\n","import FilesystemIO from './methods/filesystem';\r\nimport MemoryIO from './methods/memory';\r\nimport SavvyFile from './file';\r\nimport { TResumeData, TResumeFile } from './interface';\r\n// import SavvyZipFile from './zip_file';\r\nimport Transfer from './transfer';\r\nimport TransferProcesser from './processer';\r\nimport { generateId } from './utils';\r\n\r\nconst IS64BIT: boolean = /\\b(WOW64|x86_64|Win64|intel mac os x 10.(9|\\d{2,}))/i.test(navigator.userAgent);\r\nconst DEV: boolean = false;\r\nexport default class SavvyTransfer {\r\n  private SIZE_LIMIT: number = 1024 * 1024 * 1024 * (1 + (IS64BIT ? 1 : 0));\r\n  private CHUNK_SIZE: number = 1024 * 1024 * 1;\r\n  private HTTP_NUM: number = 5;\r\n\r\n  public totalSize: number = 0;\r\n  public IO: FilesystemIO | MemoryIO;\r\n  public IO_IS_FS: boolean = false;\r\n  public progressHandle: Function;\r\n  public statusUpdateHandle: Function;\r\n  public running: boolean = false;\r\n\r\n  // public files: Array<SavvyFile | SavvyZipFile> = [];\r\n  public transfers: Transfer[] = [];\r\n  public schedulingFiles: Transfer[] = [];\r\n  public processers: TransferProcesser[] = [];\r\n\r\n  constructor(onProgress: Function, onStatusUpdate: Function) {\r\n    if ((window as any).requestFileSystem || (window as any).webkitRequestFileSystem) {\r\n      this.IO = new FilesystemIO();\r\n      this.IO_IS_FS = true;\r\n      // fs has a largeeeee size limit, up to 200GB\r\n      this.SIZE_LIMIT = 1024 * 1024 * 1024 * 200;\r\n      // this.SIZE_LIMIT = 1024 * 1024 * 250;\r\n    } else {\r\n      this.IO = new MemoryIO();\r\n    }\r\n    this.progressHandle = onProgress;\r\n    this.statusUpdateHandle = onStatusUpdate;\r\n    if (DEV && this.IO_IS_FS) {\r\n      (this.IO as FilesystemIO).removeAll();\r\n    }\r\n\r\n    this.processers = new Array(this.HTTP_NUM).fill('').map((_: number) => new TransferProcesser());\r\n  }\r\n\r\n  /**\r\n   * resumeData@type TResumeData\r\n   */\r\n  public retrieveFilesFromLocalStorage(): Array<Transfer> {\r\n    let rawResumeData: string | null = window.localStorage.getItem('savvy_transfers');\r\n    if (rawResumeData) {\r\n      let resumeData: TResumeData[];\r\n      try {\r\n        resumeData = JSON.parse(rawResumeData);\r\n\r\n        this.transfers.push(\r\n          ...resumeData.map((data: TResumeData) => {\r\n            return new Transfer(\r\n              data.files.map((_file: TResumeFile) => new SavvyFile(_file.path, _file.name, _file.size, this.CHUNK_SIZE, _file.bufferAcc, _file.offset, _file.crc)),\r\n              data.name,\r\n              this.IO,\r\n              this.progressHandle,\r\n              this.statusUpdateHandle,\r\n              true,\r\n              data.chunkIndex,\r\n              data.id,\r\n              data.offset,\r\n              true\r\n            );\r\n          })\r\n        );\r\n      } catch (e) {\r\n        console.log(e);\r\n      }\r\n    }\r\n\r\n    if (this.IO_IS_FS) {\r\n      (this.IO as FilesystemIO).freeSpace(this.transfers);\r\n    }\r\n    return this.transfers;\r\n  }\r\n  /**\r\n   * resumeData@type TResumeData\r\n   * @param {Transfer} transferForUpdate\r\n   */\r\n  public storeFileForResume(transferForUpdate: Transfer): void {\r\n    if (transferForUpdate.status === 'complete') {\r\n      this.deleteFileFromStore(transferForUpdate);\r\n\r\n      return;\r\n    }\r\n\r\n    let resumeDataForFile: TResumeData = {\r\n      id: transferForUpdate.id,\r\n      name: transferForUpdate.name,\r\n      type: transferForUpdate.zip ? 'zip' : 'normal',\r\n      chunkIndex: transferForUpdate.chunkIndex,\r\n      tag: transferForUpdate.chunkIndex === transferForUpdate.chunkList.length ? 1 : 0,\r\n      offset: transferForUpdate.offset,\r\n      files: transferForUpdate.files.map((_file: SavvyFile) => ({\r\n        name: _file.name,\r\n        path: _file.filePath,\r\n        size: _file.fileSize,\r\n\r\n        bufferAcc: _file.bufferAcc,\r\n        offset: _file.offset,\r\n        crc: _file.crc\r\n      }))\r\n    };\r\n    let rawResumeData: string | null = window.localStorage.getItem('savvy_transfers');\r\n    let newResumeData: TResumeData[] = [];\r\n    if (rawResumeData) {\r\n      let tmpResumeData: TResumeData[];\r\n      try {\r\n        tmpResumeData = JSON.parse(rawResumeData);\r\n        let index: number = tmpResumeData.findIndex((data: TResumeData) => data.id === resumeDataForFile.id);\r\n        if (index !== -1) {\r\n          tmpResumeData.splice(index, 1, resumeDataForFile);\r\n          newResumeData.push(...tmpResumeData);\r\n        } else {\r\n          newResumeData.push(...tmpResumeData, resumeDataForFile);\r\n        }\r\n      } catch (e) {\r\n        console.log(e);\r\n      }\r\n    } else {\r\n      newResumeData.push(resumeDataForFile);\r\n    }\r\n\r\n    window.localStorage.setItem('savvy_transfers', JSON.stringify(newResumeData));\r\n  }\r\n  /**\r\n   * resumeData@type TResumeData\r\n   * @param {Transfer} transferNeedDelete\r\n   */\r\n  public deleteFileFromStore(transferNeedDelete: Transfer): void {\r\n    let rawResumeData: string | null = window.localStorage.getItem('savvy_transfers');\r\n    if (rawResumeData) {\r\n      let tmpResumeData: TResumeData[];\r\n      try {\r\n        tmpResumeData = JSON.parse(rawResumeData);\r\n        let index: number = tmpResumeData.findIndex((data: TResumeData) => data.id === transferNeedDelete.id);\r\n        if (index !== -1) {\r\n          tmpResumeData.splice(index, 1);\r\n        }\r\n\r\n        window.localStorage.setItem('savvy_transfers', JSON.stringify(tmpResumeData));\r\n      } catch (e) {\r\n        console.log(e);\r\n      }\r\n    }\r\n  }\r\n  // temporary just on type - zip\r\n  public async addFiles(files: { path: string; name: string }[], asZip: boolean = false, zipName: string): Promise<Transfer | Array<Transfer>> {\r\n    let tmpFiles: SavvyFile[] = [];\r\n    for (let i: number = 0, l: number = files.length; i < l; i++) {\r\n      try {\r\n        let tmpFile: SavvyFile | undefined | string = await this.addFile(files[i].path, files[i].name);\r\n        if (tmpFile && typeof tmpFile !== 'string') {\r\n          tmpFiles.push(tmpFile);\r\n        }\r\n      } catch (e) {\r\n        throw e;\r\n      }\r\n    }\r\n\r\n    let tmpTransfer: Transfer;\r\n    if (asZip) {\r\n      // create a zip file\r\n      tmpTransfer = new Transfer(tmpFiles, zipName, this.IO, this.progressHandle, this.statusUpdateHandle, true);\r\n      this.transfers.push(tmpTransfer);\r\n\r\n      // store in locastorage for resume\r\n      this.storeFileForResume(tmpTransfer);\r\n\r\n      return tmpTransfer;\r\n    } else {\r\n      return tmpFiles.map((file: SavvyFile) => new Transfer([file], file.name, this.IO, this.progressHandle, this.statusUpdateHandle, false));\r\n    }\r\n  }\r\n  private async addFile(path: string, name: string): Promise<SavvyFile | undefined> {\r\n    if (!path) {\r\n      console.log('file path invalid.');\r\n      throw new Error('Invalid file path');\r\n      // return;\r\n    }\r\n\r\n    // get file size\r\n    let response: Response = await fetch(path, { method: 'GET', headers: { Range: 'bytes=0-1' } });\r\n    console.log(response.headers.forEach((value, key) => console.log(`${key}: ${value}`)));\r\n    if (!response.headers.get('content-range')) {\r\n      console.log('can not get file size, check file path or contact service provider.');\r\n      // let message = 'can not get file size, check file path or contact service provider.';\r\n      throw new Error('Can not get file size, check file path or contact service provider.');\r\n      // return;\r\n    }\r\n    // calculate whether the size limit is exceeded\r\n    let fileSize: number = parseInt(response.headers.get('content-range')!);\r\n    console.log(fileSize);\r\n    if (fileSize > this.SIZE_LIMIT || fileSize + this.totalSize > this.SIZE_LIMIT) {\r\n      console.log('The download size exceeds the maximum size supported by the browser. You can use savvy-cli to proceed with the download.');\r\n      // let message = 'The download size exceeds the maximum size supported by the browser. You can use savvy-cli to proceed with the download.';\r\n      throw new Error('exceed');\r\n      // return;\r\n    }\r\n    // create new file\r\n    let tmpFile: SavvyFile = new SavvyFile(path, name, fileSize, this.CHUNK_SIZE);\r\n    // ensure each file get it's writer from IO\r\n    // `asZip` flag indicate this SavvyFile where belong another SavvyFile which will actually being download as a zip file\r\n    //  in other word, this savvyfile does not need a writer(init);\r\n    /* if (!asZip) {\r\n      this.files.push(tmpFile);\r\n    } */\r\n\r\n    this.totalSize += tmpFile.fileSize;\r\n    await new Promise((resolve, reject) => {\r\n      setTimeout(resolve, 1);\r\n    });\r\n    return tmpFile;\r\n  }\r\n  /**\r\n   * @param {Array<Transfer>[]} transfers\r\n   * pause files' processers which id within ids\r\n   */\r\n  public pause(transfers: Array<Transfer>): boolean {\r\n    if (this.running) {\r\n      transfers.map((transfer: Transfer) => {\r\n        // some file in ids may had being resumed.\r\n        // we just need care about those files which have freezed processors.\r\n        if (transfer.processer) {\r\n          // tmpFile.processer.freeze = true;\r\n          transfer.paused = true;\r\n        } else {\r\n          /**\r\n           * two possible conditions:\r\n           * 1. current transfer is not in queue.\r\n           * 2. in queue, waiting for distribute.\r\n           * */\r\n\r\n          transfer.paused = true;\r\n          transfer.status = 'paused';\r\n        }\r\n      });\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n  /**\r\n   * @param {Array<Transfer>[]} transfers\r\n   * resume files' processers which id within ids.\r\n   */\r\n  public resume(transfers: Array<Transfer>) {\r\n    transfers.map((transfer: Transfer) => {\r\n      transfer.paused = false;\r\n      this.schedule([transfer.id]);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * @param {Transfer} transfer\r\n   * @returns SavvyFile | SavvyZipFile | undefined\r\n   * remove file\r\n   * 1. pause its processor if there has one.\r\n   * 2. release the processor resource.\r\n   * 3. delete its record in LocalStorage.\r\n   */\r\n  public removeFile(transfer: Transfer): Transfer | undefined {\r\n    if (transfer && transfer.status !== 'abort') {\r\n      transfer.paused = true;\r\n      transfer.status = 'abort';\r\n      this.totalSize -= transfer.fileSize;\r\n      this.IO.deleteFile(transfer);\r\n\r\n      this.deleteFileFromStore(transfer);\r\n    }\r\n    return transfer;\r\n  }\r\n  /**\r\n   * @param {number[]?} ids\r\n   * get files which id within ids, deduplication and then push into <schedulingFiles>\r\n   */\r\n  public schedule = (ids?: Array<number>): void => {\r\n    // fill into schedulingFiles\r\n    let tmpIds: Array<number> = ids || this.transfers.map((transfer: Transfer) => transfer.id);\r\n    let nonRepeatIds: Array<number> = Array.from(new Set(tmpIds));\r\n\r\n    for (let i = 0, l = nonRepeatIds.length; i < l; i++) {\r\n      let tmpTransfer: Transfer | undefined = this.transfers.find((transfer: Transfer) => transfer.id === nonRepeatIds[i]);\r\n\r\n      if (tmpTransfer && this.schedulingFiles.filter((transfer: Transfer) => transfer.id === nonRepeatIds[i]).length <= 0) {\r\n        tmpTransfer.status = 'queue';\r\n        this.schedulingFiles.push(tmpTransfer);\r\n      }\r\n    }\r\n\r\n    this.distributeToProcessers();\r\n  };\r\n\r\n  /**\r\n   * query the current idle state of all processors\r\n   * distribute a file which is **not complete** and **not abort** and **not locked**\r\n   * to a processor in idle state.\r\n   */\r\n  public distributeToProcessers() {\r\n    if (this.schedulingFiles.length > 0) {\r\n      this.running = true;\r\n      for (let i: number = 0, l = this.processers.length; i < l; i++) {\r\n        if (this.processers[i].idle) {\r\n          let currentTransfer: Transfer | undefined = this.schedulingFiles.find(\r\n            (transfer: Transfer) => (transfer && transfer!.status !== 'abort' && transfer!.status !== 'complete' && !transfer.lock && !transfer.paused) || false\r\n          );\r\n\r\n          if (currentTransfer) {\r\n            this.processers[i].run(currentTransfer, this);\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      this.running = false;\r\n      console.log('all files are in complete state, transfer stop.');\r\n    }\r\n  }\r\n}\r\n"],"names":["undefined","require$$0","_typeof","SavvyIO","extmime","aac","abw","ace","adp","aif","aifc","aiff","apk","asf","asx","atom","au","avi","bat","bmp","btif","bz","bz2","caf","cgm","cmx","com","conf","css","csv","dbk","deb","def","djv","djvu","dll","dmg","doc","docm","docx","dot","dotm","dotx","dra","dtd","dts","dtshd","dvb","dwg","dxf","ecelp4800","ecelp7470","ecelp9600","emf","emz","eol","epub","exe","f4v","fbs","fh","fh4","fh5","fh7","fhc","flac","fli","flv","fpx","fst","fvt","g3","gif","h261","h263","h264","heif","heic","htm","html","ico","ief","iso","jpe","jpeg","jpg","jpgm","jpgv","jpm","json","jsonml","kar","ktx","list","log","lvp","m13","m14","m1v","m21","m2a","m2v","m3a","m3u","m3u8","m4a","m4u","m4v","mdi","mid","midi","mj2","mjp2","mk3d","mka","mks","mkv","mmr","mng","mov","movie","mp2","mp21","mp2a","mp3","mp4","mp4a","mp4s","mp4v","mpe","mpeg","mpg","mpg4","mpga","mpkg","msi","mvb","mxf","mxml","mxu","npx","odb","odc","odf","odft","odg","odi","odm","odp","ods","odt","oga","ogg","ogv","ogx","otc","otg","oth","oti","otp","ots","ott","oxt","pbm","pct","pcx","pdf","pgm","pic","plb","png","pnm","pot","potx","ppm","pps","ppsx","ppt","pptx","psb","psd","pvb","pya","pyv","qt","ra","ram","ras","rgb","rip","rlc","rmi","rmp","s3m","sgi","sgm","sgml","sid","sil","sldx","smv","snd","spx","srt","sub","svg","svgz","swf","tcap","text","tga","tif","tiff","torrent","tsv","ttl","txt","udeb","uva","uvg","uvh","uvi","uvm","uvp","uvs","uvu","uvv","uvva","uvvg","uvvh","uvvi","uvvm","uvvp","uvvs","uvvu","uvvv","viv","vob","wav","wax","wbmp","wdp","weba","webm","webp","wm","wma","wmf","wmv","wmx","wvx","xap","xbm","xht","xhtml","xhvml","xif","xlsx","xltx","xm","xml","xop","xpl","xpm","xsl","xslt","xspf","xvm","xvml","xwd","zip","ext","filemime","name","fext","fileext","filetype","length","replace","toUpperCase","uppercase","iknowwhatimdoing","String","substr","lastIndexOf","toLowerCase","crc32table","crc32","data","crc","len","x","y","off","i","VAL32","_HEX","toString","hasBuffer","Buffer","Int64","a1","a2","buffer","offset","_2scomp","b","o","carry","v","setValue","hi","lo","negate","Math","abs","RangeError","parseInt","Error","toNumber","allowImprecise","m","MAX_INT","Infinity","valueOf","radix","toOctetString","sep","out","Array","join","toBuffer","rawBuffer","copy","targetBuffer","targetOffset","compare","other","equals","inspect","asIs","Uint8Array","Object","prototype","call","pow","MIN_INT","zipBuffer","currentFile","transfer","_buffer","isLast","Crc32","byteLength","ziper","ZIPClass","fileSize","fileName","unescape","encodeURIComponent","bufferAcc","headerPos","ebuf","ezBuffer","i16","zipUtf8ExtraId","i8","i32","appendBytes","header","ZipHeader","getArray","d","set","centralDir","ZipCentralDirectory","centralDirBuffer","dataDescriptor","dirRecord","files","map","file","tmpCentralDir","end","ZipSuffix","dirData","tmpSize","tmpOffset","tmpBuf","console","Promise","resolve","reject","fileHeaderLen","noCompression","defaultFlags","i32max","i16max","zip64ExtraId","directory64LocLen","directory64EndLen","fileHeaderSignature","directory64LocSignature","directory64EndSignature","directoryEndSignature","dataDescriptorSignature","directoryHeaderSignature","dataDescriptorLen","dataDescriptor64Len","directoryHeaderLen","totalSize","maxZipSize","isZip64","zipVersion","localStorage","zip64","extra","readerVersion","Flags","Method","date","unsize","buf","DosDateTime","getBytes","filename","size","directory","headerpos","creatorVersion","externalAttr","i64","concat","centralDirectoryBuf","dataDescriptorBuf","pos","dirDatalength","xbuf","resize","obj","DataView","debug","error","bytes","val","array","push","isArray","charCodeAt","number","bigendian","nbuffer","setInt32","setInt16","setInt8","newsize","zobj","resizeIfNeeded","sec","Date","dosTime","dosDate","getHours","getMinutes","getSeconds","getFullYear","getMonth","getDate","customWindow","window","TEMPORARY","FilesystemIO","freeSpaceRequest","entrtiesReaded","allEntries","allResumeFiles","saveLink","objectURL","link","dlLinkNode","document","createElement","download","href","fileEntry","toURL","click","saveFile","_file","File","type","URL","createObjectURL","ex","requestFileSystem","webkitRequestFileSystem","fs","root","getDirectory","create","directoryEntry","dirReader","createReader","readEntries","entries","freeSpace","forEach","entry","id","remove","successCallback","errorCallback","getFile","getMetadata","metadata","createWriter","fw","seek","onwriteend","fileWriter","truncate","abortAllResumeData","transfers","tmpTransfer","find","err","chunkIndex","chunkList","then","e","write","Blob","isFile","delTime","setTimeout","l","MSIE","MSBlobBuilder","MemoryIO","MemoryWrite","onerror","clear","blob","getBlob","blob_url","navigator","msSaveOrOpenBlob","body","appendChild","blobList","position","append","SavvyFile","path","chunkSize","buffacc","filePath","tmpStart","tmpEnd","start","Transfer","IO","progressHandle","statusUpdateHandle","resumed","fileType","_status","remainSize","processer","lock","paused","speed","startTime","init","getFileWriter","result","status","update","tmpEndTime","getTime","duration","getStatus","reduce","prev","cur","pre","acc","index","new_status","tmpNowChunkIndex","numChunks","tmpNowFile","TransferProcesser","idle","process","scheduler","schedulingFiles","splice","findIndex","_transfer","distributeToProcessers","storeFileForResume","deleteFile","run","fetchChunk","catch","resumePreChunk","nextChunk","fetch","method","headers","Range","response","pausedDuringFetch","arrayBuffer","IS64BIT","test","userAgent","SavvyTransfer","onProgress","onStatusUpdate","SIZE_LIMIT","CHUNK_SIZE","HTTP_NUM","IO_IS_FS","running","processers","schedule","ids","tmpIds","nonRepeatIds","from","Set","filter","fill","_","rawResumeData","getItem","resumeData","JSON","parse","transferForUpdate","deleteFileFromStore","resumeDataForFile","tag","newResumeData","tmpResumeData","setItem","stringify","transferNeedDelete","asZip","zipName","tmpFiles","addFile","tmpFile","value","key","get","currentTransfer"],"mappings":"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"}